{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Opulo Documentation","text":"<p>Welcome to the Opulo Docs site! Here you'll find build guides, setup instructions, and troubleshooting steps for Opulo products. Be sure to check out product source files on GitHub and the community Discord server. You can also reach out to our customer support line.</p> <p>Something look wrong? Please let us know!</p>"},{"location":"byop/","title":"LumenPnP Kit Assembly","text":""},{"location":"byop/#what-is-the-lumenpnp","title":"What is the LumenPnP?","text":"<p>The LumenPnP is an open source Pick and Place project led by Opulo. The LumenPnP is designed to be low cost and suited towards mid-scale manufacturing.</p>  <p>The LumenPnP is capable of placing parts as small as 0402, with support for down to 0603. It is currently set up to use strip feeders, but development around active, powered feeders is ongoing.</p> <p>It is completely open source and hackable. The main controller has three AUX ports, allowing anyone to add on peripherals or communicate with other machines.</p>  <p>WARNING</p> <p>This documentation corresponds with a specific machine Build Number. The Build Number represents what hardware and 3D printed parts your machine has. The first number is what version of the Opulo hardware kit you have. If you're building a BYOP kit, you have a v2 kit, and these docs are for you! You should see \"v2\" on the pamphlet that was included in your kit.</p>"},{"location":"byop/#whats-on-this-site","title":"What's on this site?","text":"<ul> <li>How to assemble the hardware in a LumenPnP Kit</li> <li>How to connect the electrical components in a LumenPnP Kit</li> <li>How to complete basic calibration in OpenPnP</li> </ul>"},{"location":"byop/#read-before-starting","title":"READ BEFORE STARTING","text":""},{"location":"byop/#referencing-source-files","title":"Referencing Source Files","text":"<p>As you go through this guide, you might find that you'd like to refer to the source files for a number of parts in the machine. The exported build files and source for your machine can be found on the Releases Page. Make sure to reference the same Build Number as your machine kit!</p>"},{"location":"byop/#machine-orientation-and-terminology","title":"Machine Orientation and Terminology","text":"<p>Throughout this guide we'll be referring to different orientations and directions of the machine as \"left, right, front, back, up, and down.\" In general, these words are in reference to the typical view of the machine, facing it directly, as shown below.</p>  <p>We'll also refer to putting the machine \"back on its haunches.\" This refers to a feature of the LumenPnP where it can be lifted up by the front rail and let to rest upright on its back feet. This orientation is tremendously helpful for installing things to the staging plate and plugging things into the motherboard. Whenever putting your machine back, make sure the Y gantry is pushed all the way to the back of the machine to prevent backdriving the Y stepper motor driver. An image of this orientation is below.</p>"},{"location":"byop/#help","title":"Help","text":"<p>If you find that there's something unclear in this documentation, please submit a ticket on Github about it! Select the \"Index Documentation Issue\" template. You can also file an issue using the link in the upper right of any page on this site. We're trying to make this as clear and understandable as possible, so every issue you tag helps us make it better for everyone else. You can also check out the Discord server and ask questions to the community.</p>"},{"location":"byop/#timing","title":"Timing","text":"<p>Expect assembly to take about eight hours provided all parts are printed and ready to use.</p>"},{"location":"byop/#tools-needed","title":"Tools Needed","text":"<ul> <li>M2 Allen Wrench (Long, ball-end)</li> <li>M2.5 Allen Wrench (Long, ball-end)</li> <li>M3 Allen Wrench (Long, ball-end)</li> <li>M4 Allen Wrench (Long, ball-end)</li> <li>Small Phillips Screwdriver</li> <li>Small Flathead Screwdriver</li> <li>Soldering Iron and Solder</li> <li>Needle-nose Pliers</li> <li>Mallet</li> <li>Flush Cutters</li> <li>Wire Stripper</li> <li>Measuring Tape</li> <li>Calipers</li> <li>Hot Air</li> </ul>"},{"location":"byop/#next-steps","title":"Next steps","text":"<p>Let's dive in! The first step is the mechanical assembly, and printing all the parts.</p>"},{"location":"byop/mechanical-assembly/attaching-belts/","title":"Attaching Belts","text":"<p>With a complete frame assembled, we can now route the GT2 timing belt that makes everything move!</p>    Qty Part     1 GT2 Timing Belt   4 FDM-0027 (Belt Clamp)   8 M5x10 machine screw    <ol> <li> <p>We'll start with the Y axis. If you'd like to precut your belt instead of routing the entirety of it through the machine, you can cut two 1400mm lengths for the Y axis motors. To help guide the belt through the openings in the prints, bend it backwards as shown below so that the belt has a curve to it.    </p> </li> <li> <p>Take your length of GT2 belt and stick it inside the extrusion (smooth side facing outward), behind the <code>Y Gantry</code> as shown below. Getting the belt to come out of the slot in the Y axis gantry can be difficult. Here's some strategies:</p> </li> <li>Try using a small allen wrench with a ball tip to guide the belt out of the hole. (Photos below)</li> <li>Or, attach a twist tie to the end of the belt and guide that out the hole instead. When you're done, the belt should be coming out of the hole on the side closest to the front of the machine.</li> <li> <p>Running a long zip tie through the hole from the front, you may be able to catch the ridges of the zip tie with the ridges of the belt, and pull it through by retracting the zip tie.      </p> </li> <li> <p>Using 4 M5x10mm machine screws and 2 <code>Belt Clamps</code> on the <code>Y Gantry</code>, slide the belt underneath the <code>Belt Clamps</code> and tighten them down with the GT2 belt flush with the edge of the <code>Y Gantry</code>.</p> </li> <li> <p>Now, take the other end of your belt and feed it through the <code>Front Right Leg</code>. Guide it through and around the idler in the <code>Belt Tension Arm</code>, and feed it back through the other side of the <code>Front Right Leg</code> as shown below.    </p> </li> <li> <p>Continue to feed your belt along the inner side of the aluminum extrusion. Pass behind the <code>Y Gantry Support</code> between it and the aluminum extrusion.</p> </li> <li> <p>Feed the belt through the inner side of the <code>Back Right Leg</code>. Then loop the belt around the GT2 pulley on the stepper motor and feed it through the outer side of the <code>Back Right Leg</code>.   </p> </li> <li> <p>Run the belt along the outer side of the aluminum extrusion. Take the end and feed it through the other opening of the Y gantry, like we did in step 1. Feed the end between the Y gantry and the <code>Belt Clamps</code>. Make sure the belt tensioner on the front leg is completely unscrewed, meaning it's angled as close to the leg as it can be. This will give us the most possible stroke to tension the belt in the next step.</p> </li> <li> <p>Pull on the belt with one hand, while holding the Y gantry steady with the other. Getting it generally taught is preferable, but don't worry about getting it perfect; we'll tension it correctly next. Push down on the belt clamp to hold the belt in place, and tighten the two screws to clamp it down. Cut the belt with at least 20mm remaining out the back side of the Y gantry.</p> </li> <li> <p>Now we can tension the belt. Slowly tighten in the M3 screw on the belt tensioner to increase the belt tension. Pulling back on the belt tensioner arm should be difficult, but possible. A tug should result in only a 2mm deflection.</p> </li> <li> <p>Perform the same steps on the left side Y axis.   </p> </li> <li> <p>We're going to do the exact same operation for the X axis, but with one small thing to keep in mind: when looking at the back of the machine, start by clamping the belt on the right side of the X gantry (the side closest to the motor). This way, the excess belt will be sticking out of the X gantry on the side opposite of the limit switch, and prevent a problem with homing. You can precut a 1500mm strip of belt for the X axis or just use the rest of your belt and trim the excess.   </p> </li> </ol>"},{"location":"byop/mechanical-assembly/attaching-belts/#next-steps","title":"Next steps","text":"<p>Continue to populating the staging plate.</p>"},{"location":"byop/mechanical-assembly/belt-tensioners/","title":"Belt Tensioners","text":"<p>Alright, time to get into the build! First, we're going to build the belt tensioners that are used for the X and Y axes. You need to build three of these.</p>    Qty Part     1 each, 3 total M3 Hex Nut   1 each, 3 total M3x16 machine screw   1 each, 3 total M3 Cap Nut   1 each, 3 total M5x25 machine screw   1 each, 3 total M5 Nyloc Hex Nut   1 each, 3 total M5x40 machine screw   1 each, 3 total M5 Hex Nut   1 each, 3 total GT2 Pulley Idler   1 each, 3 total FDM-0037 (Belt Tension Arm)   1 FDM-0001 (Front Left Leg)   1 FDM-0002 (Front Right Leg)   1 FDM-0013 (X Idler Mount)"},{"location":"byop/mechanical-assembly/belt-tensioners/#assembling-the-belt-tensioner-arms","title":"Assembling the Belt Tensioner Arms","text":"<ol> <li> <p>Insert an M3 Hex Nut into its slot on the back of a <code>Belt Tension Arm</code>.   </p> </li> <li> <p>Insert an M3x16mm Machine Screw through the front hole in the <code>Belt Tension Arm</code> and then tighten.   </p> </li> <li> <p>Thread an M3 Cap Nut on the end of the M3x16mm Machine Screw.   </p> </li> <li> <p>Insert an M5x25mm Machine Screw through the hole in the top of the <code>Belt Tension Arm</code> so that it passes through a GT2 Pulley Idler.   </p> </li> <li> <p>Add an M5 Nyloc Hex Nut on the bottom of the <code>Belt Tension Arm</code> and tighten. Make sure the idler can still spin freely.   </p> </li> <li> <p>Repeat this two more times so that you have a total of three arms.</p> </li> </ol>"},{"location":"byop/mechanical-assembly/belt-tensioners/#attaching-a-tensioner-to-the-left-side","title":"Attaching a tensioner to the left side","text":"<p>Now you'll attach the first tensioner to the <code>Front Left Leg</code>:</p> <ol> <li> <p>Insert an M5 Nyloc Hex Nut into the recess for a hex nut on the bottom of one of the idler mount arms on the <code>Front Left Leg</code>.   </p> </li> <li> <p>Insert a completed <code>Belt Tension Arm</code> assembly between the arms on the <code>Front Left Leg</code>, with the screw head of the M5x25mm facing up.   </p> </li> <li> <p>Insert an M5x40mm Machine Screw through the hole in the top so that it passes through the <code>Belt Tension Arm</code> and tightens into the M5 Nyloc Hex Nut. Do not over-tighten, and ensure you can still pivot the tension arm.    </p> </li> </ol>"},{"location":"byop/mechanical-assembly/belt-tensioners/#attaching-a-tensioner-to-the-right-side","title":"Attaching a tensioner to the right side","text":"<p>Next, attach the second tensioner the the <code>Front Right Leg</code>. This is nearly identical to the first one:</p> <ol> <li> <p>Insert the M5 Nyloc Hex Nut into the recess for a hex nut on the bottom of one of the idler mount arms on the <code>Front Right Leg</code>.     </p> </li> <li> <p>Insert a completed <code>Belt Tension Arm</code> assembly between the arms on the <code>Front Right Leg</code>, with the screw head of the M5x25mm facing up.   </p> </li> <li> <p>Insert the M5x40mm Machine Screw through the hole in the top so that it passes through the <code>Belt Tension Arm</code> and tighten into the M5 Nyloc Hex Nut. Do not over-tighten, and ensure you can still pivot the tension arm.    </p> </li> </ol>"},{"location":"byop/mechanical-assembly/belt-tensioners/#attaching-a-tensioner-to-the-x-idler-mount","title":"Attaching a tensioner to the X idler mount","text":"<p>The third and final tensioner is attached to the <code>X Idler Mount</code>. This is only slightly different from the previous two:</p> <ol> <li> <p>Insert the M5 Nyloc hex nut into the recess on the bottom of the <code>X Idler Mount</code>.   </p> </li> <li> <p>Insert the completed <code>Belt Tension Arm</code> into its slot in the <code>X Idler Mount</code>.   </p> </li> <li> <p>Insert the M5x40mm machine screw through the hole in the top of the <code>X Idler Mount</code> so that it passes through the <code>Belt Tension Arm</code> and tightens into the Nyloc Hex Nut.  Do not over-tighten, and ensure you can still pivot the <code>Belt Tension Arm</code>.    </p> </li> </ol>"},{"location":"byop/mechanical-assembly/belt-tensioners/#next-steps","title":"Next steps","text":"<p>Now that all the tensioners are in the right place, continue with assembling the left side.</p>"},{"location":"byop/mechanical-assembly/connecting-sides/","title":"Connecting the Sides","text":"<p>Now we're going to combine the left and right side together using two aluminum extrusions, and the staging plate.</p>    Qty Part     2 Aluminum extrusion   16 M5 T-slot nut   4 M5x10 machine screw   12 M5x8 machine screw   6 2020 Corner Bracket   1 FDM-0022 (Umbilical Guide)    <ol> <li> <p>Insert a new v-slot extrusion (in green below) into the <code>Front Left Leg</code> underneath the bottom rail.      </p> </li> <li> <p>Drop in and position a slot nut underneath the hole and use a M5x10mm machine screw to fasten the v-slot extrusion to the <code>Front Left Leg</code>.   </p> </li> <li> <p>Drop in and position a slot nut underneath the hole and use a M5x10mm machine screw to fasten the v-slot extrusion to the <code>Front Right Leg</code>.   </p> </li> <li> <p>Attach one of the included metal 2020 corner bracket to the 20x20 V-Slot on the left side using two slot nuts and two M5x8mm screws.   </p> </li> <li> <p>Attach a 2020 corner bracket to the 20x20 V-Slot on the right side using two slot nuts and two M5x8mm screws.   </p> </li> <li> <p>Fasten the <code>Umbilical Guide</code> on the bottom side of the bottom rail of the left side in place using two M5x10mm screws and two slot nuts.   </p> </li> <li> <p>Affix a 2020 corner bracket to the end of another V-slot using the a slot nut and an M5x8mm screw. Make sure the side of the bracket is perfectly flush with the end of the extrusion. It helps to tighten it in place against a flat surface.   </p> </li> <li> <p>Repeat the previous step three times to install three more braces in the orientation shown below. This is the back rail.   </p> </li> <li> <p>Flip the machine upside down. Using four M5x8mm screws and four slot nuts, fasten the back rail to the left and right sides of the machine as shown below. Make sure that the ends of the back rail are perfectly flush with the sides of the extrusion on the left and right sides. This will help keep the machine square. The brackets do not need to be touching the printed feet.      </p> </li> </ol>"},{"location":"byop/mechanical-assembly/connecting-sides/#next-steps","title":"Next steps","text":"<p>Continue to assembling the Y Gantry.</p>"},{"location":"byop/mechanical-assembly/left-side/","title":"Left Side","text":"<p>Now that the belt tensioner arms are assembled and attached, it's time to start working on the frame. You'll start by assembling the left side of the machine as seen from the front:</p>"},{"location":"byop/mechanical-assembly/left-side/#assembly","title":"Assembly","text":"Qty Part     1 FDM-0001 (Front Left Leg)   1 FDM-0003 (Back Left Leg)   2 Aluminum extrusions   6 M5 T-slot nut   6 M5x10 machine screw   1 NEMA17 Stepper motor   1 GT2 Pulley (with grub screws)   6 M3x8 machine screw   1 Limit switch PCB   2 M5x25 machine screw   1 FDM-0007 (Frame Umbilical Mount)   1 FDM-0046 (Umbilical Swivel Part 1)   1 FDM-0047 (Umbilical Swivel Part 2)   1 M5x40 machine screw    <ol> <li> <p>Take the <code>Front Left Leg</code> and insert the v-slot extrusions into the two square holes designed to take this part. Ensure that the extrusion comes to the end of the holes in which they're inserted. If you have a hard time getting the extrusion into the slots, gently slide them into place using some taps from a mallet.    </p> </li> <li> <p>Take the <code>Back Left Leg</code>. Your progress should look like the image below.    </p> </li> <li> <p>On the top rail, drop in and position a slot nut underneath the hole in the top of each leg and screw a M5x10mm machine screw into the nut.     </p> </li> <li> <p>On the bottom rail, the outer side has three exposed holes for machine screws (one on the <code>Back Left Leg</code>). For each, drop in and position a slot nut under it and screw a M5x10mm machine screw into it.     </p> </li> <li> <p>On the bottom rail, the inner side has one exposed hole for a machine screw on the <code>Back Left Leg</code>. Drop in and position a slot nut under it and screw a M5x10mm machine screw into it.    </p> </li> <li> <p>Slide the GT2 Pulley onto the the motor shaft of a NEMA17 stepper motor with the set screw side facing the motor body. Align the pulley so that the end is roughly flush with the end of motor shaft, then tighten one of the set screws on the pulley into the flat side of the motor shaft. Tighten the second set screw as well.   </p> </li> <li> <p>Mount the NEMA17 stepper motor to the <code>Back Left Leg</code>. Attach it using four M3x8mm screws, ensuring that the connector is facing inwards towards the zip tie loops as dictated in the picture.    </p> </li> <li> <p>Mount one of the three limit switches to the <code>Front Left Leg</code> as shown in the image. Use two M3x8mm screws and tap them directly into the print.     </p> </li> <li> <p>Next, we'll mount the <code>Frame Umbilical Mount</code> as shown, threading directly into the part.   </p> </li> <li> <p>Lastly, we'll assemble the umbilical swivel. <code>Swivel Part 1 and Swivel Part 2</code> fit together as shown below, and are secured in place with a M5x40mm screw and an M5 nut. Tighten so there's no play in the fit, but the two parts can swivel easily. This part helps keep the X gantry umbilical suspended over the build area. Set it aside for now.   </p> </li> </ol>"},{"location":"byop/mechanical-assembly/left-side/#next-steps","title":"Next steps","text":"<p>Continue to assembling the right side.</p>"},{"location":"byop/mechanical-assembly/mount-x-to-y/","title":"Mounting the X Gantry to the Y Gantry","text":"<p>Now that we have both gantries assembled, it's time to put them together.</p>"},{"location":"byop/mechanical-assembly/mount-x-to-y/#x-gantry-tensioner-bars","title":"X Gantry Tensioner Bars","text":"Qty Part     2 V-slot roller wheel   2 FDM-0043 (X Gantry Tension Bar)   2 M5x40 machine screw   2 M5 Hex Nut   4 M3x30 machine screw    <ol> <li> <p>Fit the X gantry on top of the Y gantry rail. Make sure the X motor is on the left side with the front of the X gantry facing you.</p>  <p>Note</p> <p>You'll find that it's hard to fit the X gantry onto the rail. This is because of a few protrusions on the back plate that hold the belt at the right distance. Loosening the M5x40mm bolts holding the two halves of the X gantry together will help it slot onto the rail.</p>   </li> <li> <p>Prepare two V-slot rollers. You may need to align one or both of the interior washers inside the rollers, as they can shift in shipping and block the hole for the screw. Simply push the washers back into place with a screwdriver tip.</p> </li> <li> <p>With the top roller bolts still loose, slide the two <code>X Gantry Tension Bars</code>.    </p> </li> <li> <p>Now we can secure the stack in place using two M5x40mm bolts. Pass them through the holes, and loosely tighten them into two M5 nuts in the slots on the <code>X Gantry Back</code>. Don't tighten all the way yet; we still have some adjustment to do first.     </p> </li> <li> <p>Tighten the top roller bolts now that everything is in its place.   </p> </li> <li> <p>Now we add tension screws. These are what hold the <code>X Gantry Tension Bars</code>, as shown below. Make sure each screw is tightened the same amount, and that the X gantry can still move freely, but doesn't have any wiggle on the rail.    </p> </li> <li> <p>Tighten the M5x40mm bolts that run through the bottom set of rollers (installed in the previously) so that their position is locked.   </p> </li> </ol>"},{"location":"byop/mechanical-assembly/mount-x-to-y/#camera-and-ring-light","title":"Camera and Ring Light","text":"Qty Part     1 USB Camera (Top)   1 FDM-0015 (Top Light Mount)   1 FDM-0014 (Top Camera Mount)   1 Top Ring Light PCB   4 M2.5x20 machine screw   2 M3x14 machine screw   1 Super Lube     <p>Note</p> <p>There's a piece of black electrical tape on the back of the camera PCB. Don't remove it; it is there to help isolate the camera sensor from light shining through vias in the PCB.</p>  <ol> <li> <p>Before mounting the camera, you'll need to make sure you can rotate the lens and adjust the camera's focus. First carefully remove the set screw on the side of the lens assembly that is holding the lens in place. Next, unscrew the lens from the camera. You might need a light grip with pliers (preferably with soft grips) to get it to turn. With the lens removed, use a cotton swab to apply a very small amount of Super Lube to the lens threads. Be careful not to get any of the lubricant inside or on the lens. Wipe off any excess with a cotton swab or microfiber cloth. If necessary, you can clean the lens itself using a microfiber cloth. Screw the lens back into the camera and work the lubricant into the threads. Save the lubricant as you'll use it again later. Finally, add the set screw back to the side of the lens assembly. Tighten the set screw just enough to keep the lens in place but not so much that it prevents you from adjusting the lens with a little force, as you'll need to adjust the lens after the camera is mounted.</p> </li> <li> <p>Place the ring light facing downwards into the <code>Top Light Mount</code>. The LEDs will shine down, and the white plastic wire connector will face upwards.    </p> </li> <li> <p>Place the <code>Top Camera Mount</code>. These two prints will pinch the top ring light in place.   </p> </li> <li> <p>Install the Top Camera into the <code>Top Camera Mount</code>.    </p> </li> <li> <p>Secure the whole stack in place with four M2.5x20mm screws in the outer four holes (not the ones with a metal circle around them). Tighten them down so that all parts are tightly held together, but don't over-torque; these screws are threading into the plastic of the <code>Top Light Mount</code>.   </p> </li> <li> <p>Use two M3x14mm screws to mount the Top Camera and Light subassembly onto the back of the <code>X Gantry Back</code>.   </p> </li> </ol>"},{"location":"byop/mechanical-assembly/mount-x-to-y/#next-steps","title":"Next steps","text":"<p>Continue to mounting the Y Gantry to the Frame.</p>"},{"location":"byop/mechanical-assembly/mount-y-to-frame/","title":"Mounting the Y Gantry to the Frame","text":"<p>Now the whole XY gantry assembly gets dropped onto the frame!</p>    Qty Part     2 M5x40 machine screw   4 FDM-0009 (Roller spacer)   2 V-slot roller wheel   2 M5 Hex Nut   4 M5 T-slot nuts   1 Staging Plate    <ol> <li> <p>Loosen the four M5x40mm screws holding the two halves of the <code>Y Gantries</code> together.     </p> </li> <li> <p>Loosen the two M5x10mm screws that hold the <code>Y Gantries</code> to the X extrusion. Double-check that none of the captive nuts in either of the <code>Y Gantries</code> have fallen out, since they'll be difficult to reinsert after the next step.   </p> </li> <li> <p>Slot the entire XY gantry assembly onto the top extrusions of the frame. Make sure the X motor is on the left of the machine.    </p> </li> <li> <p>Re-tighten the four M5x40mm screws holding the two halves of the <code>Y Gantries</code> together.   </p> </li> <li> <p>We'll add an additional roller to each <code>Y Gantry assembly</code> below the extrusions of the frame. Push a M5x40mm machine screw through the <code>Y Gantry</code>, then add on a <code>Roller Spacer</code>, a V-Slot roller, and then another <code>Roller Spacer</code>. Secure the assembly in place with an M5 nut slotting into the <code>Y Gantry Support</code> and threading into the screw. Note: you may need to align one or both of the interior washers inside the rollers, as they can shift in shipping and block the hole for the screw. Simply push the washers back into place with a screwdriver tip.   </p> </li> <li> <p>Now roll the entire Gantry Assembly to the very front of the machine. Adjust the fit of the X axis extrusion inside the <code>Y Gantries</code> so that the top rollers fit perfectly into the v-slot. After you adjust them, tighten both M5x10mm screws that hold the Y Gantries to the X axis extrusion.    </p> </li> <li> <p>Now we need to make sure this spacing doesn't just work for the front of the machine, but for the entire length of it as well. Loosen the machine screws connecting the back rail to the left and right side. While applying light pressure down on the Y gantry, roll it to the back of the machine. You might find that you need to expand or contract the back legs to have the rollers ride perfectly in the v-slot. Once you have the correct spacing, tighten the bolts mounting the back rail. This locks in the Y gantry extrusion spacing for the back of the machine as well. We also recommend measuring the spacing between the rails in the front and back of the machine, and adjusting until they're the same.    </p> </li> <li> <p>Use four Slot Nuts and four M5x8mm screws to loosely secure the Staging Plate to the frame. If you have the fiberglass PCB staging plate, the coordinate A1 is in the front left of the machine.   </p> </li> <li> <p>If you purchased additional staging plates, loosely secure them next to your first staging plate with four Slot Nuts and four M5x8mm screws.   </p> </li> <li> <p>Adjust the Staging Plate so that it is exactly 95mm away from the <code>Front Left Leg</code> and <code>Front Right Leg</code>, then tighten it into place. This will be important for using the OpenPnP configuration provided for the machine. See below for how to measure the distance properly.   </p> </li> <li> <p>Tighten the four M3x16mm screws, two on either <code>Y Gantry assembly</code>, so that the lower rollers are snug against the extrusion and ensure that the top rollers run well in their slots, too. Make sure that there's no play or wiggle in the fit, but don't over-tighten to the point of increasing resistance to rolling. The gantry should move easily, but not loosely.   </p> </li> <li> <p>Lastly, tighten the bolts that run through the bottom rollers to lock in the tension setting.</p> </li> </ol>"},{"location":"byop/mechanical-assembly/mount-y-to-frame/#next-steps","title":"Next steps","text":"<p>Continue to attaching the belts.</p>"},{"location":"byop/mechanical-assembly/populating-staging-plate/","title":"Populating the Staging Plate","text":"<p>We now have the main structure of the machine assembled! Now we'll mount some components to the bottom of the staging plate.</p>"},{"location":"byop/mechanical-assembly/populating-staging-plate/#overview","title":"Overview","text":"<p>Refer to the images below for referencing where to mount parts on the staging plate.</p>"},{"location":"byop/mechanical-assembly/populating-staging-plate/#soldering-pump","title":"Soldering Pump","text":"Qty Part     1 Vacuum Pump   1 Vacuum Pump Wire (Labeled \"P1\")   2 Heatshrink (small)    <p>Some LumenPnP kits shipped with a pump that had its connector pre-soldered to it. If your pump is not pre-soldered, follow along here to prepare your pump.</p> <ol> <li> <p>Gather your Pump, the pump wire (labeled \"P1\"), and two lengths of heatshrink.   </p> </li> <li> <p>Slip the heatshrink over the two exposed leads of the wire.   </p> </li> <li> <p>Wrap the red wire around the left lead as shown in the image below. Wrap the black wire around the right lead.   </p> </li> <li> <p>Solder both wires to the pump leads. The polarity does not matter.   </p> </li> <li> <p>Slip the heat shrink over the solder joints and motor lead. Use a hot air gun, lighter, or other heat source to shrink the heatshrink.    </p> </li> </ol>"},{"location":"byop/mechanical-assembly/populating-staging-plate/#pump-mount","title":"Pump mount","text":"Qty Part     1 FDM-0025 (Pump Mount)   2 M3 Hex Nuts   2 Rubber Band   1 Vacuum Pump   2 M3x10 machine screw    <p>The first thing we'll mount to the staging plate is the <code>Pump Mount</code>. This print suspends the pump using two rubber bands to ensure none of the vibration of the pump is transferred into the frame.</p> <ol> <li> <p>Start by press-fitting M3 nuts into the side recesses in the <code>Pump Mount</code>.   </p> </li> <li> <p>Now we'll mount the pump in the <code>Pump Mount</code> using a couple rubber bands. Start by grabbing the rubber band with both hands, giving it a half twist, and folding it over on itself, making two loops.     </p> </li> <li> <p>Now stretch each rubber band over each pair of pegs on the <code>Pump Mount</code>. Guide the pump between each pair of bands so that it's suspended in the <code>Pump Mount</code>.     </p> </li> <li> <p>Mount the <code>Pump Mount</code> to the staging plate using two M3 x 10mm screws in the location shown below, G31 and G33.    </p> </li> </ol>"},{"location":"byop/mechanical-assembly/populating-staging-plate/#valve-mount","title":"Valve mount","text":"Qty Part     1 FDM-0042 (Valve Mount)   1 Blowoff Valve   4 M3 Hex Nut   6 M3x8 machine screw    <p>Now we'll attach the <code>Valve Mount</code> to the staging plate.</p> <ol> <li> <p>Press fit four M3 nuts into the recesses in the <code>Valve Mount</code>.   </p> </li> <li> <p>Use two M3x8mm screws to attach the valve to the <code>Valve Mount</code> as shown below.   </p> </li> <li> <p>Use four M3x8mm screws to mount the <code>Valve Mount</code> to the staging plate in the location shown: E23, E25, G23, G25.    </p> </li> </ol>"},{"location":"byop/mechanical-assembly/populating-staging-plate/#pneumatic-y-splitter-mount","title":"Pneumatic Y splitter mount","text":"Qty Part     1 M3x30 machine screw   1 M3 Hex nut   1 Y Splitter    <ol> <li>Use an M3x30mm screw and an M3 nut to mount the pneumatic Y splitter to the staging plate as shown: B12.    </li> </ol>"},{"location":"byop/mechanical-assembly/populating-staging-plate/#bottom-camera-mount","title":"Bottom camera mount","text":"Qty Part     1 FDM-0019 (Up Light Mount)   1 FDM-0020 (Up Camera Mount)   1 Up Ring Light PCB   1 USB Camera (Bottom)   4 M3x30 machine screw   4 M3 Hex Nut   4 M2.5x8 machine screw   1 Super Lube    <ol> <li> <p>Slide the Up Ring Light into the <code>Up Light Mount</code>. The cable connector and LEDs should be facing the printed part, away from the camera in this photo.    </p> </li> <li> <p>Stack the <code>Up Camera Mount</code>Up Light Mount`   </p> </li> <li> <p>Just as with the top camera, you need to make sure you can rotate the camera's lens to adjust its focus. First carefully remove the set screw on the side of the lens assembly that is holding the lens in place. Next, unscrew the lens from the camera. You might need a light grip with pliers (preferably with soft grips) to get it to turn. With the lens removed, use a cotton swab to apply a very small amount of Super Lube to the lens threads. Be careful not to get any of the lubricant inside or on the lens. Wipe off any excess with a cotton swab or microfiber cloth. If necessary, you can clean the lens itself using a microfiber cloth. Screw the lens back into the camera and work the lubricant into the threads. Save the lubricant as you'll use it again later. Finally, add the set screw back to the side of the lens assembly. Tighten the set screw just enough to keep the lens in place but not so much that it prevents you from adjusting the lens with a little force, as you'll need to adjust the lens after the camera is mounted.</p> </li> <li> <p>Stack the Up Camera in the <code>Up Camera Mount</code>. The cable connector for the camera should be as close to the cable connector for the Up Ring Light as possible, as pictured below.    </p> </li> <li> <p>Use four M2.5x8mm screws to mount the camera into the <code>Up Camera Mount</code> by using the inner set of four holes and tapping directly into the plastic.   </p> </li> <li> <p>If you have the fiberglass PCB staging plate, you'll need to install a support foot to keep the staging plate sturdy. Stack the Foot Mount on top of the assembly. If you have the metal staging plate, you can skip this step.   </p> </li> <li> <p>If you have the fiberglass PCB staging plate, push four M3 nuts into the recesses in the Foot Mount.   </p> </li> <li> <p>Use four M3x30mm screws and four M3 nuts mount the whole assembly to the staging plate: D18, B20, D20, F22 (if you have the fiberglass staging plate, these will be the nuts you installed in the previous step). The cable connector for the Up Ring Light should be facing down and to the left, away from the valve.    </p> </li> <li> <p>Ensure that your bottom camera matches the orientation to the image below.    </p> </li> <li> <p>If you have the fiberglass PCB staging plate, note that this is where the foot will get installed when your LumenPnP is ready.   </p> </li> </ol>"},{"location":"byop/mechanical-assembly/populating-staging-plate/#nozzle-holder","title":"Nozzle Holder","text":"Qty Part     1 FDM-0024 (Nozzle Holder)   3 M3 Hex Nut   3 M3x8 machine screw    <ol> <li> <p>Slide three M3 nuts into the slots in the back of the <code>Nozzle Holder</code>.   </p> </li> <li> <p>Using three M3x8mm machine screws, tighten the <code>Nozzle Holder</code> on top of the staging plate as shown: B8, D8, F8. Note: we will install the datum board later, ignore it in the photo below.     </p> </li> </ol>"},{"location":"byop/mechanical-assembly/populating-staging-plate/#next-steps","title":"Next steps","text":"<p>Continue to installing the motherboard.</p>"},{"location":"byop/mechanical-assembly/printing-parts/","title":"Printing Parts","text":""},{"location":"byop/mechanical-assembly/printing-parts/#getting-the-part-models","title":"Getting The Part Models","text":"<p>Alright, time to get the parts we need to print! You can find the parts you need on the Releases Page, and look at the attached Assets at the bottom of the release. Click and download both <code>LumenPnP-STLs</code> and <code>LumenPnP-BOM</code> to get the STL files and BOM for your machine.</p>"},{"location":"byop/mechanical-assembly/printing-parts/#printer-requirements","title":"Printer Requirements","text":"<p>These parts are designed to fit onto a printer with a build volume of at least 18 x 18 x 18 cm, such as the Prusa MINI. Although not recommended, it's possible to print the parts on a smaller printer with some creative placements.</p> <p>Additionally these parts are designed for printers with a 0.4mm nozzle. Using a larger nozzle diameter can result in some features not resolving correctly, or parts not fitting as designed.</p>"},{"location":"byop/mechanical-assembly/printing-parts/#material","title":"Material","text":"<p>These parts are designed for PLA, however, some folks have printed the parts successfully with PETG. You'll need about 1 kg of the primary filament.</p> <p>There are three situations where you'll need specific filament colors:</p> <ul> <li>White or transparent filament for the light mounts, <code>top-light-mount</code> and <code>bottom-light-mount</code>. These parts act as light diffusers for the ring lights.</li> <li>White or light colored filament for the <code>nozzle-rack</code>. This helps with setting up the automatic tool changer.</li> <li>A darker filament for the Z gantries, <code>z-gantry-left</code> and <code>z-gantry-right</code>. This helps the bottom camera distinguish the nozzle tip from the rest of the gantry. If you print in a lighter color anyway you can use a bit of blue painter's table on the bottom side of the gantry.</li> </ul>"},{"location":"byop/mechanical-assembly/printing-parts/#print-settings","title":"Print settings","text":"<p>There are two different print setting profiles you'll need for printing the parts. We use PrusaSlicer's setting names, but you should be able to adapt them if you use a different slicer. Every printer is a little different, but these settings should be a reasonable starting point. You can tune them as needed once you print the calibration print in the next step.</p>"},{"location":"byop/mechanical-assembly/printing-parts/#default-settings","title":"Default Settings","text":"<p>These settings are used for the majority of the parts:</p> <ul> <li>Layer height: 0.2 mm</li> <li>Vertical shells &gt; Perimeters: 3</li> <li>Infill &gt; Fill density: 20%</li> <li>Horizontal shells &gt; Solid Layers: 5 for top and bottom</li> <li>Support material &gt; Generate support material: yes</li> </ul>"},{"location":"byop/mechanical-assembly/printing-parts/#gantry-settings","title":"Gantry Settings","text":"<p>These settings are used for parts that require more strength:</p> <ul> <li>Layer height: 0.2 mm</li> <li>Vertical shells &gt; Perimeters: 4</li> <li>Infill &gt; Fill density: 30%</li> <li>Horizontal shells &gt; Solid Layers: 5 for top and bottom</li> <li>Support material &gt; Generate support material: yes</li> </ul> <p>Use gantry settings for the following parts:</p> <ul> <li>y-gantry</li> <li>y-gantry-support</li> <li>roller-spacer</li> <li>x-gantry-front</li> <li>x-gantry-back</li> <li>x-idler-mount</li> <li>z-gantry-left</li> <li>z-gantry-right</li> </ul>"},{"location":"byop/mechanical-assembly/printing-parts/#calibration-print","title":"Calibration Print","text":"<p>Before printing the parts, print the calibration part. This part contains every feature- screw holes, nut slots, extrusion profiles, etc.- used in the printable parts. Printing this first ensures your printer calibration and print settings are correct.</p>  <p>This is the calibration print, colloquially referred to as \"the corndog\". This part isn't currently included in the exported STLs, so grab it from the link above.</p> <p>After printing, you can check fit of various fasteners and one of the aluminum extrusions to ensure the parts you print will all fit as expected:</p> <ul> <li>Check that M3 and M5 bolts fit through their counter-sunk holes.</li> <li>Check that M3 and M5 nuts fit in both hexagonal voids and vertical nut slots.</li> <li>Check that M3 and M5 bolts can be self-tap through the two holes inside the lock icon. They should take some effort, but they should grip well into the print.</li> <li>Check that the 20 x 20 mm aluminum extrusion fits into the square hole.</li> </ul> <p>Once you're happy with the fit you can start printing the parts.</p>"},{"location":"byop/mechanical-assembly/printing-parts/#printing-the-parts","title":"Printing The Parts","text":"<p>You can find out how many of each part to print in the <code>LumenPnP-BOM</code> zip file you downloaded in the first step. After unzipping, open the HTML file in your browser to see the machine's Bill of Materials.</p> <p>The \"Part Name\" column will tell you which part to print and the \"Quantity\" column will tell you how many to print. There's a rendered image of each 3D printed part as well to help identify them. Just print the parts that have the \"Part Type\" of \"FDM\". The other items in this table are a list of all the other fasteners, hardware, and off the shelf parts used in the machine's mechanical build- all of these have been provided in the kit.</p> <p>The 3d models are already in the preferred orientation for printing, so you only need to make sure they're placed within the build volume when slicing.</p>"},{"location":"byop/mechanical-assembly/printing-parts/#optional-parts","title":"Optional Parts","text":"<p>There are some parts in the Bill of Materials page that are highlighted and flagged as optional. These prints are not necessary to print - feel free to print them if you think they'll be useful for you, but they aren't required for building the machine. There are notes in the BOM about what extra parts and steps are necessary to use them.</p>"},{"location":"byop/mechanical-assembly/printing-parts/#next-steps","title":"Next steps","text":"<p>Start by assembling the belt tensioners.</p>"},{"location":"byop/mechanical-assembly/right-side/","title":"Right Side","text":"<p>Great! Now lets make the right side. Very similar to the left, just a couple small changes. Remember that we're referring to the right side of the machine as seen from the front:</p>"},{"location":"byop/mechanical-assembly/right-side/#assembly","title":"Assembly","text":"Qty Part     1 FDM-0002 (Front Right Leg)   1 FDM-0004 (Back Right Leg)   2 Aluminum extrusion   6 M5 T-slot nut   6 M5x10 machine screw   1 NEMA17 stepper motor   1 GT2 Pulley (with grub screws)   4 M3x8 machine screw    <ol> <li> <p>Take the <code>Front Right Leg</code> and insert the v-slot extrusions into the two square holes designed to take this part. Ensure that the extrusion comes to the end of the holes in which they're inserted. If you have a hard time getting the extrusion into the slots, gently slide them into place using some taps from a mallet.     </p> </li> <li> <p>Take the <code>Back Right Leg</code>. Your progress should look like the image below.    </p> </li> <li> <p>On the top rail, drop in and position a slot nut underneath the hole in the top of each leg and screw a M5x10mm machine screw into the nut.     </p> </li> <li> <p>On the bottom rail, the outer side has three exposed holes for machine screws (one on the <code>Back Right Leg</code>). For each, drop in and position a slot nut under it and screw a M5x10mm machine screw into it.     </p> </li> <li> <p>On the bottom rail, the inner side has one exposed hole for a machine screw on the <code>Back Right Leg</code>. Drop in and position a slot nut under it and screw a M5x10mm machine screw into it.    </p> </li> <li> <p>Slide the GT2 Pulley onto the the motor shaft of a NEMA17 stepper motor with the set screw side facing the motor body. Align the pulley so that the end is roughly flush with the end of motor shaft, then tighten one of the set screws on the pulley into the flat side of the motor shaft. Tighten the second set screw as well.   </p> </li> <li> <p>Mount the NEMA17 stepper motor to the <code>Back Right Leg</code> with four M3x8mm screws, ensuring that the connector is facing inwards towards the zip tie loops as dictated in the picture.    </p> </li> </ol>"},{"location":"byop/mechanical-assembly/right-side/#next-steps","title":"Next steps","text":"<p>Continue to connecting the two sides together.</p>"},{"location":"byop/mechanical-assembly/x-gantry-assembly/","title":"X Gantry Assembly","text":"<p>Alright, the last major bit of assembly! Once this is done, the majority of the machine's structure is built.</p>"},{"location":"byop/mechanical-assembly/x-gantry-assembly/#x-gantry-preparation","title":"X Gantry Preparation","text":"Qty Part     1 FDM-0011 (X Gantry Front)   1 FDM-0012 (X Gantry Back)   4 M5 Hex Nut   12 M3 Hex Nut   1 M5 Nylock Hex Nut    <ol> <li> <p>Insert four M5 Hex Nuts into the slots on the <code>X Gantry Back</code> as shown below.   </p> </li> <li> <p>Ensure each hex nut is fully seated into their slot. It may be helpful to pull the hex nuts fully into location by screwing a M5x10mm machine screw into them from the opposite side of the <code>X Gantry Back</code>. Afterwards, remove the screw.</p> </li> <li> <p>Insert four M3 Hex Nuts, two vertically and two horizontally into the slots on <code>X Gantry Back</code> as indicated below.   </p> </li> <li> <p>Insert six M3 Hex Nuts into the slots on the <code>X Gantry Front</code> as shown below.   </p> </li> <li> <p>Insert two more M3 nuts into the vertical slots on the other side of the <code>X Gantry Front</code>.   </p> </li> <li> <p>Pull the hex nuts fully into location by screwing a M3x10mm machine screw into them from the opposite side of the <code>X Gantry Front</code>. Then unscrew the M3x10mm machine screw.</p> </li> <li> <p>Insert a M5 Nylock Hex Nut into the slot at the bottom of the <code>X Gantry Front</code>.   </p> </li> </ol>"},{"location":"byop/mechanical-assembly/x-gantry-assembly/#attaching-x-gantry-front-and-back","title":"Attaching X Gantry Front and Back","text":"Qty Part     2 M5x40 machine screw   2 FDM-0009 (Roller spacer)   2 V-slot roller wheel   2 M5 Hex Nut    <ol> <li> <p>Insert two M5x40mm machine screws, one into each of the top two holes on the <code>X Gantry Front</code>.   </p> </li> <li> <p>Slide a <code>Roller Spacer</code> onto each of the two machine screws.   </p> </li> <li> <p>Slide a V-slot roller onto each of the two machine screws. Note: you may need to align one or both of the interior washers inside the rollers, as they can shift in shipping and block the hole for the screw. Simply push  the washers back into place with a screwdriver tip.    </p> </li> <li> <p>Place the <code>X Gantry Back</code> onto the two machine screws.   </p> </li> <li> <p>Install two M5 Hex Nuts, one into each of the slots on the <code>X Gantry Back</code>. Tighten the nuts on the machine screws so that the two sides are snug against the V-slot rollers.   </p> </li> </ol>"},{"location":"byop/mechanical-assembly/x-gantry-assembly/#preparing-for-the-z-gantry","title":"Preparing for the Z Gantry","text":"Qty Part     2 100mm Linear Rail   6 M3x14 machine screw   1 NEMA17 stepper motor   6 M3x8 machine screw   1 Limit switch PCB   1 GT2 Pulley Idler   1 M5x25 machine screw    <ol> <li> <p>Carefully and safely remove the stoppers holding the gantry onto the linear rail. Depending on your kit, these could be metal clips or rubber stoppers inserted through the rail. Take care not to accidentally slide the bearings off of the linear rails after removing the stoppers. The bearings will be properly blocked from being removed after the linear rails are attached to the <code>X Gantry Front</code> and the Z-axis limit switch is installed.</p> </li> <li> <p>Place the two linear rails onto the front of the <code>X Gantry Front</code> and line up each one with the arrays of three holes on the left and right side. Place three M3x14mm machine screws into each of the rails (the holes on the ends first, then hole one in the middle) and tighten down.   </p> </li> <li> <p>Place the NEMA 17 motor so the shaft runs through the <code>X Gantry Front</code>.    </p> </li> <li> <p>Attach the limit switch PCB with two M3x8mm screws at the top right of the <code>X Gantry Front</code>.   </p> </li> <li> <p>Slide a GT2 idler onto a M5x25mm machine screw. Thread that assembly through <code>X Gantry Front</code> and tighten on the Nyloc Hex Nut on the back side. Ensure that the fit is tight and there's no wiggle in the idler, but also make sure that it can spin freely and isn't seizing from over-tightening.   </p> </li> </ol>"},{"location":"byop/mechanical-assembly/x-gantry-assembly/#z-gantry-assembly","title":"Z Gantry Assembly","text":"Qty Part     1 FDM-0040 (Left Z Gantry Backplate)   1 FDM-0041 (Right Z Gantry Backplate)   1 FDM-0017 (Left Z Gantry)   1 FDM-0039 (Right Z Gantry)   1 GT2 Timing Belt   8 M3x8 machine screw   1 GT2 Pulley (with grub screws)    <p>Now it's time to mount the Z gantries. Each gantry comes in two parts. The first is a back plate that sits against the linear rail carriage, and connects to the timing belt, called <code>Left Z Gantry Backplate</code>. These will always be on your machine. Even when you swap toolheads, these will stay attached to the linear rail.</p> <ol> <li> <p>First, we need to get the GT2 timing belt inserted into the back plates at the right spacing. Insert the end of your GT2 belt halfway along the slot in the <code>Right Z Gantry Backplate</code> with 108mm of belt between them (when measuring from the edges of the prints). Your setup should look like the image below:   </p> </li> <li> <p>Now, cut the loose end of the belt such that there is 114mm remaining when measured from the edge of the print. Insert this loose end into the other backplate so that there are no empty teeth.</p> </li> </ol>  <ol> <li>Slide the GT2 Pulley onto the Z axis motor's shaft, with the set screws closer to the motor body. Don't tighten the set screws yet. Place backplate and belt assembly on linear rails, threading the belt through the pulley on the stepper motor. Ensure that the back plates are oriented as shown in the image below.</li> </ol>  <ol> <li>Insert M5x40mm bolt with GT2 idler into bottom of plate, and thread the belt around it. Secure backplates temporarily with two M3x8mm bolts as shown below.</li> </ol>  <ol> <li> <p>Slide the Z motor up in its hardware slots and check for belt tension. If you're able to get the belt completely taut, great! If not, remove a loose end of the belt, snip off a belt rib from one side, reinsert, and try again. As long as you are able to get the belt taught from the movement of the stepper motor, you're good to move on.</p> </li> <li> <p>While pulling upward on the Z stepper motor so that the belt is tesioned, tighten the four M3 bolts holding it to the X gantry.</p> </li> </ol>  <ol> <li>Finally, attach the left and right Z gantries to the back plates using M3x8mm bolts as shown below.</li> </ol>"},{"location":"byop/mechanical-assembly/x-gantry-assembly/#mounting-the-z-axis-tools","title":"Mounting the Z-axis tools","text":"Qty Part     1 NEMA11 hollow shaft stepper motor   4 M2.5x8 machine screw   1 CP40 nozzle holder   1 Pneumatic Couple   4 M5x10 machine screw   2 FDM-0027 (Belt Clamp)    <ol> <li> <p>Now that our Z gantries are all tightened and moving freely, we can mount our final axis: rotation! Take your NEMA11 hollow shaft stepper motor and place it in the left Z gantry. Secure it in place with four M2.5x8mm screws. Make sure the wire port is facing outwards as shown below.   </p> </li> <li> <p>Now we'll mount a few bits of hardware to the hollow shaft motor. Screw the CP40 nozzle holder into the bottom side of the motor, and screw the press-fit pneumatic coupler into the top side.   </p> </li> <li> <p>Use four M5x10mm screws to loosely attach two of your <code>Belt Clamps</code>.   </p> </li> </ol>"},{"location":"byop/mechanical-assembly/x-gantry-assembly/#next-steps","title":"Next steps","text":"<p>Continue to mounting the X Gantry to the Y Gantry.</p>"},{"location":"byop/mechanical-assembly/y-gantry-assembly/","title":"Y Gantry Assembly","text":"<p>It's time to get going on the Y gantry. This is what moves the toolhead forward and back, and also carries the X gantry as well. We've got a few sub-assemblies in this one, so let's dive in!</p>"},{"location":"byop/mechanical-assembly/y-gantry-assembly/#x-motor-mount-sub-assembly","title":"X Motor Mount Sub-Assembly","text":"Qty Part     1 NEMA17 stepper motor   1 GT2 Pulley (with grub screws)   1 FDM-0006 (X Motor Mount)   4 M3x8 machine screw    <ol> <li> <p>Slide the GT2 Pulley onto the the motor shaft of a NEMA17 stepper motor with the set screw side facing the motor body. Align the pulley so that the end is roughly flush with the end of motor shaft, then tighten one of the set screws on the pulley into the flat side of the motor shaft. Tighten the second set screw as well.   </p> </li> <li> <p>Place the motor onto the <code>X Motor Mount</code> with the wires exiting the motor on the left side of the mount.   </p> </li> <li> <p>Mount the NEMA17 stepper motor to the <code>X Motor Mount</code> with four M3x8mm screws. Again, check that the connector is facing towards the left side of the mount.   </p> </li> </ol>"},{"location":"byop/mechanical-assembly/y-gantry-assembly/#y-gantry-sub-assemblies","title":"Y Gantry Sub-Assemblies","text":"<p>Note: You will need to build two identical Y Gantry Sub-Assemblies. You can build them one at a time, or in parallel, step by step.</p>    Qty Parts     1 FDM-0005 (Y Gantry)   1 FDM-0008 (Y Gantry Support)   10 M5 Hex Nut   2 M3 Hex Nut   2 M3x16 machine screw   2 M5x40 machine screw   2 V-Slot roller wheel    <ol> <li> <p>Insert eight M5 hex nuts into the slots indicated below on one of the <code>Y Gantries</code>.   </p> </li> <li> <p>Ensure each hex nut is fully seated into their slot. It may be helpful to pull the hex nuts fully into location by screwing a M5x10mm machine screw into them from the opposite side of the <code>Y Gantry</code>. Afterwards, remove the screw.</p> </li> <li> <p>Insert a M3 Hex Nut vertically into the slot at the bottom of the <code>Y Gantry</code>.   </p> </li> <li> <p>Loosely thread an M3x16mm machine screw into the nut installed in the previous step until you can see the tip of the screw poking through the nut.   </p> </li> <li> <p>Insert an M3 nut vertically into the slot indicated below on a <code>Y Gantry Support</code>.   </p> </li> <li> <p>Loosely thread an M3x16mm machine screw into the nut installed in the previous step until you can see the tip of the screw poking through the nut.   </p> </li> <li> <p>Insert two M5x40mm machine screws, one into each of the top roller positions in the <code>Y Gantry</code>.   </p> </li> <li> <p>Slide a V-Slot roller one onto each of the two M5x40mm machine screws. Note: you may need to align one or both of the interior washers inside the rollers, as they can shift in shipping and block the hole for the screw. Simply push the washers back into place with a screwdriver tip.   </p> </li> <li> <p>Insert two M5 nuts into the back side of <code>Y Gantry Support</code> and then place the assembly onto the two M5x40mm machine screws from the last step. Loosely screw them in so they're attached; we'll tighten them in a later step.    </p> </li> <li> <p>Repeat steps 12-20 for the second <code>Y Gantry</code>.</p> </li> </ol>"},{"location":"byop/mechanical-assembly/y-gantry-assembly/#final-assembly","title":"Final Assembly","text":"Qty Part     1 Aluminum extrusion   2 M5 T-slot nut   2 M5x10 machine screw   8 M5x25 machine screw   1 FDM-0010 (Y Gantry Umbilical Mount)   1 Limit switch PCB   2 M3x8 machine screw   1 FDM-0013 (X Idler Mount) with belt tensioner    <ol> <li> <p>Place a Y gantry assembly on each end of a v-slot extrusion. Don't worry about pushing it all the way into the print; we'll be adjusting it in a later step.    </p> </li> <li> <p>Drop in and position a T slot nut under the machine screw hole on the top of each gantry side and loosely thread a M5x10mm machine screw into each of the nuts. Again, we'll adjust this later.   </p> </li> <li> <p>Using four M5x25mm machine screws, attach the X idler assembly to the right side gantry body. Note that orientation does matter here: the head of the machine screw that holds the idler should be visible when looking down at the top of the machine, and the chamfers on the <code>X Idler Mount</code>.    </p> </li> <li> <p>Using four M5x25mm machine screws, attach the <code>X Motor Mount</code> should be at the back, on the same side as the motor's cable connector.    </p> </li> <li> <p>Finally, mount the X axis limit switch to the <code>Y Gantry</code>. Secure it in place using two M3x8mm screws as shown in the image below. These screws tap directly into the print.   </p> </li> </ol>"},{"location":"byop/mechanical-assembly/y-gantry-assembly/#next-steps","title":"Next steps","text":"<p>Continue to assembling the X Gantry.</p>"},{"location":"byop/motherboard/installing-tht/","title":"Install THT Components","text":"<p>There are five types of connectors that need to be soldered into your motherboard. We'll go over each one, and how to solder them in place.</p>"},{"location":"byop/motherboard/installing-tht/#screw-terminal","title":"Screw Terminal","text":"<p>In your connector bag you'll find a screw terminal connector. This provides power to the machine, and goes into the <code>J12</code> footprint on the upper-right corner of the board. Ensure that the openings that accept the power cables are facing outwards.</p>"},{"location":"byop/motherboard/installing-tht/#idc-connectors","title":"IDC Connectors","text":"<p>The IDC connectors are the larger, black connectors in your connector bag. There are only two sizes, a 2x3 for feeder communication, and three 2x6 for the auxillary ports. Be sure to solder them the correct orientation. The slot on the connector should match up with the silkscreen.</p>"},{"location":"byop/motherboard/installing-tht/#jst-xh-connectors","title":"JST XH Connectors","text":"<p>The bulk of the connectors on the board are JST XH connectors. These come in two, three, and four pin variations. The two pin connectors are for the mosfets, the three pin connectors are for the servos, limit switches, and ring lights, and the four pin connectors are for the stepper motors.</p>  <p>WARNING<p>The 4-pin JST XH connector for the Y2 motor (the one right next to the Y silkscreen indicator) needs to be rotated 180 degrees from what the silkscreen dictates. This one should be soldered in reverse, opposite of the silkscreen indication. Refer to the image below for reference.</p> </p>  <p>  </p>"},{"location":"byop/motherboard/installing-tht/#usb-a-connectors","title":"USB A Connectors","text":"<p>There are three USB A connectors that need to be soldered into the board as well. Two of these are for the webcams, and the third is for future functionality. We recommend soldering the large structural tabs in place first, then soldering the four data pins afterward.</p>"},{"location":"byop/motherboard/installing-tht/#stepper-motor-driver-headers","title":"Stepper Motor Driver Headers","text":"<p>The last connectors that need to be soldered into the board are the 1x8 Dupont 0.1\" headers for the stepper motor drivers. Two connectors need to be soldered for each driver. We recommend soldering a single pin in place first while getting the connector to stay flat, then do the rest of the pins after the orientation is solidified. Orientation does not matter for these connectors.</p>"},{"location":"byop/motherboard/installing-tht/#double-check-usb-c-feet","title":"Double-check USB-C Feet","text":"<p>The LumenPnP motherboard will have the USB-C connector already soldered when you receive it. Double-check the soldering of the feet, as there was an early batch of motherboards that had issues with an in-house assembly error here. If you see an issue, take photos of it before attempting to repair the problem. That way, if you're unable to fix the issue, Opulo can still replace your motherboard for you. If you don't feel confident fixing an issue yourself or if you aren't sure if there's a problem with your motherboard, get in touch with support@opulo.io so that we can send you a replacement motherboard if necessary.</p>"},{"location":"byop/motherboard/installing-tht/#next-steps","title":"Next steps","text":"<p>Continue to mounting the motherboard.</p>"},{"location":"byop/motherboard/mounting/","title":"Mounting the Motherboard","text":""},{"location":"byop/motherboard/mounting/#mounting","title":"Mounting","text":"Qty Part     4 M3 25mm Standoff   8 M3x8 machine screw    <p>Now that we've got all the THT components soldered in, it's time to mount the motherboard to the staging plate. It's important to make sure we're mounting the motherboard in the correct place on the staging plate so that all the cables fit and reach their respective ports correctly.</p> <ol> <li> <p>Put your Lumen up on its haunches and take a look at the left side of the staging plate. We will be working with the following holes on the staging plate: A3, G3, A9, G9.   </p> </li> <li> <p>Pass four M3x10mm screws through the top side of the staging plate, and tighten them into the standoffs.   </p> </li> <li> <p>Now we can mount the motherboard itself. Confirm the orientation of your motherboard so that the USB ports are facing to the left and the vacuum sensors on the bottom. Then use four M3x10mm screws to secure the motherboard to the standoffs.   </p> </li> </ol>"},{"location":"byop/motherboard/mounting/#drivers","title":"Drivers","text":"Qty Part     4 Stepper motor driver PCB   4 PCB Heatsink    <ol> <li> <p>Install the four stepper motor drivers into the X, Y, Z, and Left Head slots. Note that the whale icon on the motor drivers will be right-side up and the two upward-facing pins will be facing to the left.   </p> </li> <li> <p>Install the four heatsinks on the center of the motor drivers.   </p>  <p>Note</p> <p>It is very important to not plug in or unplug stepper motor drivers or motors while the board is powered on. Make sure to unplug the power supply before inserting or removing drivers or motors.</p>  </li> </ol>"},{"location":"byop/motherboard/mounting/#power","title":"Power","text":"Qty Part     1 Power Supply    <ol> <li> <p>Cut the barrel connector off the end of the power supply cable.   </p> </li> <li> <p>Separate the two wires and strip off the insulation of each.   </p> </li> <li> <p>Twist the stranded copper and insert the wire with the white text into the positive side of the power screw terminal on the motherboard. Insert the black wire into the other terminal, and screw both down tightly.</p>  <p>Note</p> <p>Do NOT apply solder to the twisted copper wires. This can prevent the wires from being compressed in the screw terminals, meaning uneven electricity and heat distribution and risk damaging your machine. You may use wire crimps if you prefer and have them on hand.</p>   </li> <li> <p>Next, plug in your power brick. Watch for a light by the screw terminal. If you do not see a light, check to make sure you inserted the wires into the correct terminals. Also check to see if the light on the power brick is illuminated. (The color of the light may differ based on which kit you received.)    </p> </li> </ol>"},{"location":"byop/motherboard/mounting/#next-steps","title":"Next steps","text":"<p>Make sure your motherboard is running the latest firmware.</p>"},{"location":"byop/motherboard/update-firmware/","title":"Update the Firmware","text":"<p>This step is optional. Your motherboard comes with a correct build of Marlin pre-installed, but if you'd like to update the firmware or change settings, this will help you do so!</p>"},{"location":"byop/motherboard/update-firmware/#using-the-auto-build-marlin-vscode-extension","title":"Using the Auto Build Marlin VSCode Extension","text":"<p>MARLIN VERSION</p> <p>Building an older version of Marlin with the recommended config files won't work. If you are unsure whether a previously-downloaded local version of Marlin is the newest one, re-downloading it is the safest choice.</p>  <ol> <li>Download the latest Marlin firmware and unzip it.</li> <li>Install VSCode and its PlatformIO extension.</li> <li>Open Marlin firmware's folder on VSCode.</li> <li>Grab Marlin configuration files here and replace the files in the Marlin/Marlin folder with those new ones.</li> <li>Install the Auto Build Marlin plugin using this Marlin Documentation page, or download it directly from the Visual Studio Marketplace.</li> <li> <p>Try to build Marlin using the build button with the hammer icon as shown below: </p> </li> <li> <p>If this is successful, attach the LumenPnP Mobo to your computer with the USB cable. If it isn't, this might help:</p> <ul> <li>Check the error messages for configuration errors and fix them, or replace it with the default config</li> <li>If this fails, check that your config file version is the same as your Marlin version (e.g. a bugfix-2.0.x config file won't work in a bugfix-2.1.x)</li> <li>When in doubt, re-download Marlin and the configuration files from the links above</li> </ul> </li> <li> <p>Boot your motherboard into DFU Mode</p> <ol> <li>Press and hold the <code>BOOT</code> button</li> <li>Press the Reset button and hold for 10 seconds</li> <li>Release the Reset button and wait for 10 seconds</li> <li>Release the <code>BOOT</code> button   </li> </ol>  <p>NOTE</p> <p>If you have a hard time getting your board to enter DFU mode, instead try powering off the machine entirely, holding the 'BOOT' button, plugging in power, waiting 10 seconds, then release the <code>BOOT</code> button.</p>  </li> <li> <p>Flash the Motherboard using <code>dfu-util</code> by running the command <code>dfu-util -d 0x0483:0xdf11 -s 0x08000000:leave -a 0 -D ./.pio/build/Opulo_Lumen_REV3/firmware.bin</code> in the integrated terminal in the root of the repository.   </p>  <p>COMMAND EXPLANATION</p> <p><code>dfu-util</code> is a flash tool available on all platforms.</p> <ul> <li><code>-d 0x0483:0x0df11</code> tells the tool to flash the STM32 chip on the motherboard. This is optional if you only have one dfu device connected.</li> <li><code>-s 0x8000000:leave</code> is the target memory address that the firmware is flashed to. The <code>:leave</code> part will cause the chip to reset on its own, making the machine accessible in OpenPNP without rebooting it.</li> <li><code>-a 0</code> makes the tool use the alt setting required for flashing the ESP32.</li> <li><code>-D ./.pio/build/Opulo_Lumen_REV3/firmware.bin</code> is the path to the to-be-flashed firmware. If you want to flash another file, change this.</li> </ul>  </li> <li> <p>Wait for the process to finish.</p> </li> <li> <p>The machine should show up as a COM/Serial Port on your PC now, and you should be able to access it via OpenPNP. If it doesn't, press the Reset button on the board, or power-cycle the machine after the flashing is completed.</p> </li> </ol>  <p>This is how you can check whether your machine is connected properly:</p> <ul> <li>Windows:   </li> <li>Mac/Linux:   </li> </ul>   <p>FLASHING VIA PLATFORMIO</p> <p>Note that flashing the firmware using the Auto Build Marlin Plugin might work, but seems error-prone for most people. Therefore, if you want to try it, you can, but using <code>dfu-util</code> is generally a better idea.</p>  <p>If you're absolutely sure that ABM is the way to go, do this:</p> <ol> <li>Boot your motherboard into DFU Mode</li> <li>Press and hold the <code>BOOT</code> button</li> <li>Press the Reset button and hold for 10 seconds</li> <li>Release the Reset button and wait for 10 seconds</li> <li>Release the <code>BOOT</code> button  </li> <li>Now, press the upload button in ABM as shown below: </li> <li>Wait for the process to finish</li> <li>Continue with step 11 {{% /alert %}}</li> </ol>"},{"location":"byop/motherboard/update-firmware/#manually-configuring-platformio-for-flashing-via-pio","title":"Manually Configuring PlatformIO (for flashing via PIO)","text":"<ol> <li>Download the latest Marlin firmware and unzip it.</li> <li>Install VSCode and its PlatformIO extension</li> <li>Open Marlin firmware's folder on VSCode</li> <li> <p>Grab Marlin configuration files and replace the files in the Marlin/Marlin folder with those new ones.</p> </li> <li> <p>Edit the platformio.ini file to indicate which board you're uploading to. Update <code>default_envs</code> to read <code>Opulo_Lumen_REV3</code> or <code>Opulo_Lumen_REV4</code> depending on your motherboard.   </p> </li> <li> <p>Attach the LumenPnP Mobo to your computer with the USB cable.</p> </li> <li> <p>Boot your motherboard into DFU Mode</p> <ol> <li>Press and hold the <code>BOOT</code> button</li> <li>Press the Reset button and hold for 10 seconds</li> <li>Release the Reset button and wait for 10 seconds</li> <li>Release the <code>BOOT</code> button   </li> </ol> </li> </ol>  <p>NOTE</p> <p>If you have a hard time getting your board to enter DFU mode, instead try powering off the machine entirely, holding the 'BOOT' button, plugging in power, waiting 10 seconds, then release the <code>BOOT</code> button.</p>  <ol> <li> <p>Upload firmware to the board via PlatformIO:   </p> </li> <li> <p>Wait for the process to finish:   </p> </li> <li> <p>Press Reset on the board, or power-cycle the machine after the flashing is completed. Now it should show up as a COM/Serial Port on your PC:</p> </li> <li> <p>Windows:   </p> </li> <li>Mac/Linux:   </li> </ol>"},{"location":"byop/motherboard/update-firmware/#flashing-factory-firmware","title":"Flashing Factory Firmware","text":"<p>If you've put new firmware on your motherboard, but just want to get back to the firmware that your machine was flashed with, check the release for your build number and download the .bin firmware file attached to it. Put your board into DFU mode as described above, connect to your computer, and flash the binary to the board using the following command:</p> <pre><code>`dfu-util -d 0x0483:0xdf11 -s 0x08000000:leave -a 0 -D ~/path/to/firmware.bin`\n</code></pre> <p>Once flashing is completed, the machine should automatically exit DFU mode, and be accessible to OpenPNP again.</p>"},{"location":"byop/motherboard/update-firmware/#troubleshooting","title":"Troubleshooting","text":"<p>If you aren't able to upload, you can check to see if your motherboard is booting into DFU mode correctly:</p> <ul> <li> <p>Windows:   </p> </li> <li> <p>Mac/Linux:   </p> </li> </ul> <p>Also, reference the Marlin instructions for uploading.</p>"},{"location":"byop/motherboard/update-firmware/#alternative-method-not-recommended","title":"Alternative Method (Not Recommended)","text":"<p>This method requires an ST-Link (V2 Clone or equivalent). Additionally you need the software  STM32CubeProgrammer by ST. This method is a bit more involved and takes longer than just using the DFU mode.</p> <ol> <li>Compile (build) the project normally with PIO</li> <li>This generates a .bin-file that contains the firmware</li> <li>Connect your board to your ST-Link through the SWD header on board</li> <li>Start STM32CubeProgrammer</li> <li> <p>Connect to the MCU:   </p> </li> <li> <p>Click on Open file and navigate to the firmware.bin file in PROJECT_DIRECTORY/.pio/build/STM32F407VE_black </p> </li> <li> <p>Click on Download. This will flash the SMT32F4 with the provided firmware   </p> </li> <li> <p>Done! Now you just have to disconnect the ST-Link and press the reset button on the board.</p> </li> </ol>"},{"location":"byop/motherboard/update-firmware/#next-steps","title":"Next steps","text":"<p>Continue to wiring and pneumatics.</p>"},{"location":"byop/testing/actuator-check/","title":"Actuator Check","text":""},{"location":"byop/testing/actuator-check/#pumps","title":"Pumps","text":"<p>The first and most important actuator on your LumenPnP is the vacuum pump. We can check this by sending more Gcode to the machine. Send the first line to turn on the pump, and the second one to turn it back off.</p> <pre><code>M106 ;turn MOS1 on\nM107 ;turn MOS1 off\n</code></pre>"},{"location":"byop/testing/actuator-check/#valves","title":"Valves","text":"<p>We can also check the blowoff valve. This can be tested using the Gcode below. Listen for a slight click when each of the commands are run; this is the sound of the valve actuating!</p> <pre><code>M106 P1 S255   ;turn MOS2 on\nM107 P1        ;turn MOS2 off\n</code></pre> <p>It's worth noting that MOS3 and MOS4 can be actuated using the following commands (when something is plugged into those ports):</p> <pre><code>M106 P2 S255   ;turn MOS3 on\nM107 P2        ;turn MOS3 off\nM106 P3 S255   ;turn MOS4 on\nM107 P3        ;turn MOS4 off\n</code></pre>"},{"location":"byop/testing/actuator-check/#ring-lights","title":"Ring Lights","text":"<p>Check the ring lights using the Gcode below. Note that both lights are controlled together, with the same command. You can edit the color of the lights by adjusting the R, U, and B terms in the command, and you can edit the brightness by editing the P term. For more information, check the Marlin Docs page on M150.</p> <pre><code>M150 P255 R255 U255 B255   ;turn on ring lights\nM150 P0                    ;turn off ring lights\n</code></pre> <p>If you'd like to change the brightness that your ring lights actuate to during a job, you can edit the P value in this section of the \"Machine Setup\" tab in OpenPnP:</p>"},{"location":"byop/testing/actuator-check/#vacuum-sensors","title":"Vacuum Sensors","text":"<p>Now we can check the vacuum sensors.  First, check the value from the first vacuum sensor before and after a vacuum is pulled to check that it's working correctly. You should see that the values are different by about 200.</p> <pre><code>M3426 G4 C1 I1 A110   ;read vac 1 value\nM106                  ;turn on the pump\nM106 P1 S255          ;turn on the valve\n;cover the nozzle with your finger and wait two seconds\nM3426 G4 C1 I1 A110   ;read vac 1 value again\nM107                  ;turn off the pump\nM107 P1               ;turn off the valve\n</code></pre>  <p>Interposer Board<p>Some LumenPnP kits shipped with a less than optimal vacuum sensor wiring. Some people's sensors can detect a swing of about 200, but in some cases there isn't enough of a difference for a useful signal because of some part tolerances. We're sorry about this! When the community discovered this issue, we stopped shipping immediately and designed a board that sits in between the vacuum sensor and the motherboard that makes the signal much stronger. Once we confirmed this board fixes the issue, we installed them on all machines we shipped moving forward.</p> <p>No Interposers Installed   </p> <p>Interposer Boards Installed   </p> <p>If you bought a LumenPnP kit that did not come with interposer boards installed and would like to upgrade them, please reach out to our support team and we'll get some sent out to you as soon as possible. We have an installation guide to guide you through the process.</p> <p>If you have the interposer boards installed for your vacuum sensors, change the <code>G4</code> to a <code>G2</code> in your \"sensor read\" GCode command. This changes the gain of the sensor to a more usable value. The difference in value should now be about 2000.</p> </p>  <p>It's also worth noting the command for reading the second vacuum sensor. Until pneumatics for a second nozzle are plumbed in, the second one will only ever read ambient pressure.</p> <pre><code>M3426 G4 C2 I1 A110  ;read vac 2 value\n</code></pre>  <p>In Case Of Error<p>These commands are meant for a newer version of Marlin that adds support for multiple ADCs. If you're getting an error in response from Marlin, update the firmware to the latest version.</p> </p>"},{"location":"byop/testing/actuator-check/#next-steps","title":"Next steps","text":"<p>Continue to feedback.</p>"},{"location":"byop/testing/connect-computer/","title":"Connect to the Computer","text":""},{"location":"byop/testing/connect-computer/#motherboard","title":"Motherboard","text":"<ol> <li> <p>Connect your LumenPnP to your computer using the motherboard's USB-C port.</p> </li> <li> <p>Manually move the Y gantry all the way to the front of the machine, and the X gantry all the way to the left.</p> </li> <li> <p>Plug in the power supply to power up the machine</p>  <p>Heads Up</p> <p>The motherboard will not show up on your computer if not powered up through the screw terminal port. USB power is not used to prevent overdrawing current from your computer's USB port.</p>  </li> <li> <p>Now, it's time to check and see if your computer recognizes the motherboard. We're going to use CNCjs to check this, but feel free to use any other tool you'd like. Download CNCjs, install it, and open it.</p> </li> <li> <p>In the <code>Connection</code> widget, select the <code>Marlin</code> tab.</p> </li> <li> <p>Click the refresh button next to the <code>Port</code> dropdown, and click the dropdown to see if your computer found the board.</p> <ul> <li>If you're on Windows, the port should look like <code>COM1</code> or something similar</li> <li>Mac should look like <code>/dev/tty.usbserial00000</code></li> <li>Linux should look like <code>/dev/tty.ACM0</code></li> </ul> </li> <li> <p>Keep the Baud Rate at <code>115200</code>, and click the Open button. If you see boot text enter the <code>Console</code> widget, you've successfully connected to your LumenPnP!</p>  <p>Troubleshooting</p> <p>If your LumenPnP doesn't show up on the list, try some of the following steps:</p> <ol> <li>Restart your computer</li> <li>Check if the LumenPnP shows up in Device Manager (Windows).</li> <li>Try another USB Port</li> <li>Try re-flashing firmware</li> </ol>  </li> </ol>"},{"location":"byop/testing/connect-computer/#cameras","title":"Cameras","text":"<p>We also need to check connecting to the cameras. CNCjs has a webcam feature, so we'll use it for this test too.</p> <ol> <li> <p>Find the <code>Webcam</code> tab in the bottom left of the window</p> </li> <li> <p>Click on the module using the little slider icon</p> </li> <li> <p>Open the widget using the carrot icon</p> </li> <li> <p>Finally, click the gear and look for detected webcams in the dropdown under \"Use a built-in camera or a connected webcam\". You should find \"PnP Top Camera\" and \"PnP Bottom Camera\" in the dropdown. Select each one and test out the camera feed.</p> </li> </ol>   <p>Troubleshooting<p>If the cameras don't seem to be working, try zooming the image and toggling it on and off again. Additionally, some combinations of the USB hub chip we use in the motherboard and USB hub chips used in computers don't allow for video streaming to work for one or both cameras. If you don't see either or both cameras appear, don't worry! You can always unplug them from the motherboard and plug them directly into your computer.</p> </p>"},{"location":"byop/testing/connect-computer/#next-steps","title":"Next steps","text":"<p>Continue to testing the motors.</p>"},{"location":"byop/testing/feedback/","title":"Feedback","text":"<p>You're done with the build! We'd love if you let us know how it went (the form takes less than a minute). We want to make it as easy as possible to build a LumenPnP, and your feedback helps us do that.</p>"},{"location":"byop/testing/feedback/#lumenpnp-build-survey-here","title":"LumenPnP Build Survey Here","text":""},{"location":"byop/testing/motor-check/","title":"Motor Check","text":"<p>Now that you're connected to your LumenPnP, we'll walk you through testing the motors and automatic homing.</p>"},{"location":"byop/testing/motor-check/#test-the-limit-switches","title":"Test the limit switches","text":"<p>Before telling the machine to move, it's important to make sure that your limit switches are connected properly. This will make sure the machine can correctly home and prevent damage. For each of the three limit switches on the machine, tap the switch closed and watch for a red LED to light up on the limit switch PCB. If all three do, proceed with motor movement testing. If not, double check your limit switch connections.</p>"},{"location":"byop/testing/motor-check/#manually-home-the-machine","title":"Manually home the machine","text":"<p>One more step before having the machine move: manually move the the machine's head to the lower left corner of the machine. Don't move it completely into the limit switches, leave a few centimeters of space.</p>  <p>Doing this makes sure that the machine head does not crash into the build plate during the homing and motor tests.</p>"},{"location":"byop/testing/motor-check/#home-each-axis-individually","title":"Home each axis individually","text":"<p>Now you're ready to test the machine's motion. You'll do this one axis at a time to limit any possible damage due to motion issues.</p> <p>You'll start with the Z axis (the nozzle head). Send the following lines of Gcode one-by-one:</p> <pre><code>G91   ; absolute positioning\nG28 Z ; home the Z axis\n</code></pre> <p>The Z axis should move to the limit switch and then back off. If it doesn't, make sure you have the motor cable for the Z axis connected correctly at both the motherboard and the motor.</p> <p>Before continuing, move the Z axis to \"safe\" Z, which prevents it from colliding with the staging plate:</p> <pre><code>G0 Z 31; Move the Z axis to safe Z\n</code></pre> <p>Next, you'll home the X axis. Send the following Gcode:</p> <pre><code>G28 X;\n</code></pre> <p>The machine's head should move to the left, touch the limit switch, and back off. If it doesn't, double check the X axis motor's connection.</p> <p>If the X axis homes correctly, you're ready to home the Y axis:</p> <pre><code>G28 Y;\n</code></pre> <p>The machine's head should move to the front of the machine, touch the limit switch, and back off. If it doesn't move correctly, double check that you soldered the <code>Y2</code> connector opposite of the silkscreen as noted in the motherboard section.</p> <p>If the X, Y, and Z axis all moved and homed correctly, excellent! If not, reach out to us for assistance.</p>"},{"location":"byop/testing/motor-check/#nozzle-rotation","title":"Nozzle rotation","text":"<p>Next we'll check the left nozzle rotation stepper motor:</p> <pre><code>G0 A90\n</code></pre> <p>You should see your nozzle stepper rotate 90 degrees. If not, double check motor connections and make sure that the vacuum hose isn't obstructing movement.</p>"},{"location":"byop/testing/motor-check/#next-steps","title":"Next steps","text":"<p>Continue to testing the actuators.</p>"},{"location":"byop/wiring-and-pneumatics/connecting-pneumatics/","title":"Connecting the Pneumatics","text":"<p>Now that we've got everything wired up, it's time to get all the tubing plumbed.</p>    Qty Part     65 mm 6mm Tubing (Clear)   230 mm 6mm Tubing (Clear)   235 mm 4mm Tubing (Black)   Remaining 4mm Tubing (Black)"},{"location":"byop/wiring-and-pneumatics/connecting-pneumatics/#plumbing-the-staging-plate","title":"Plumbing the staging plate","text":"<ol> <li>The origin of vacuum in the machine is our vacuum pump. The off-center port is the one that provides vacuum. Start by cutting a 65mm section of the 6mm clear tubing and pushing it onto the off-center port on the vacuum pump. Push the other end onto the inline plastic port of the valve as shown below.</li> </ol>  <ol> <li> <p>Cut a 230mm section of the 6mm clear tubing and push it onto the right-angle plastic port of the valve, and push the other side into the single, larger port of the Y splitter.    </p> </li> <li> <p>Switch to using the smaller, 4mm black tubing. Cut a 235mm length of 4mm OD tubing and push one side into a fork of the Y splitter, and route the other end underneath the motherboard and onto the <code>VAC1</code> sensor port.</p>  <p>Keep In Mind</p> <p>This sensor is only attached to the motherboard with six solder joints. Be gentle when pushing the tubing onto it. Twisting the tubing back and forth as you push it down can help get it on without too much force.</p>   </li> </ol>"},{"location":"byop/wiring-and-pneumatics/connecting-pneumatics/#plumbing-the-x-gantry","title":"Plumbing the X gantry","text":"<ol> <li> <p>Now take the remaining length of 4mm black tubing and push it into the other fork of the Y splitter. Take the loose end, and route it underneath the motherboard, then up through all the zip ties that are holding the X umbilical in place, including those along the swivel arm.   </p> </li> <li> <p>Now that the pneumatics are also routed, we can finally tighten the zip ties on the umbilical cable guide. While your machine is still back on its haunches, tighten the zip tie on the umbilical guide to secure the wires and tubing to the frame.</p> </li> <li> <p>Bring your LumenPnP down onto its four legs, and tighten the zip ties, ensuring to keep a bit of slack between sections. You can move up the umbilical swivel and tighten all the zip ties along the whole thing.</p> </li> <li> <p>With the pneumatic tubing dangling loose past the end of the swivel arm, cut any excess tubing (still allowing some slack for motor rotation) push the other end into the pneumatic coupling on the back side of the rotation stepper motor. Extra slack will allow the motor to rotate freely 180 degrees in each direction, so err on the side of leaving more than less. If the tubing falls away from the umbilical, use one or two small zip ties to secure them together.      The bottom of the staging plate should look like the image below:   </p> </li> </ol> <p>Congratulations, you're all wired and plumbed up! It's time to give it a test!</p>"},{"location":"byop/wiring-and-pneumatics/connecting-pneumatics/#next-steps","title":"Next steps","text":"<p>Continue to testing your machine.</p>"},{"location":"byop/wiring-and-pneumatics/connecting-to-mobo/","title":"Connecting to the Motherboard","text":"<p>Take your LumenPnP and flip it up onto its haunches. You should see lots of cables loosely attached to the <code>Frame Umbilical Mount</code>, all looking for a home. We're about to give them one!</p>"},{"location":"byop/wiring-and-pneumatics/connecting-to-mobo/#plugging-in","title":"Plugging in","text":"<ol> <li> <p>We'll first start by plugging in the Y motors you routed behind the motherboard in Wiring the Y Motors. Plug the cable labeled <code>Y1</code> into the left Y motor port on the motherboard, and plug the <code>Y2</code> cable into the right one.   </p> </li> <li> <p>Take the Bottom Camera USB cable and run it to the left across the staging plate, under the motherboard, and out the other side. Plug it into the USB port by the label <code>Btm Cam</code>. Store the excess cable underneath the motherboard.</p> </li> <li> <p>Now we'll do the same thing, but with the Top Camera cable. Guide it from the top left of the staging plate, underneath the motherboard from the top side, then out the side like the other USB cable. Plug it into the USB port by the label <code>Top Cam</code> and Store the excess cable underneath the motherboard.</p> </li> <li> <p>The rest of the cables can be routed without being tucked underneath the motherboard. Plug in the listed labeled cables into their respective ports, shown below:</p> </li> </ol>    Cable Label Mobo Label     <code>XM</code> <code>X</code>   <code>Y1</code> <code>Y</code> (Left Port)   <code>Y2</code> <code>Y</code> (Right Port)   <code>ZM</code> <code>Z</code>   <code>LM</code> <code>L</code>   <code>XL</code> <code>X</code>  (Under <code>Limit Switches</code>)   <code>ZL</code> <code>Z</code>  (Under <code>Limit Switches</code>)   <code>YL</code> <code>Y</code>  (Under <code>Limit Switches</code>)   <code>UL</code> <code>Btm Cam</code>   <code>DL</code> <code>Top Cam</code>   <code>P1</code> <code>MOS1</code>   Valve 1 (No Label) <code>MOS2</code>"},{"location":"byop/wiring-and-pneumatics/connecting-to-mobo/#strain-relief","title":"Strain Relief","text":"<ol> <li> <p>Now that we have everything plugged in, it's time to attach all these loose cables to the frame. Use some <code>Cable Clamps</code> with some M3x14mm screws and M3 nuts to hold down the cables across the staging plate.   </p> </li> <li> <p>Take your umbilical cable bundles and loosely secure them in place on the <code>Umbilical Guide</code> using two big zip ties. Don't tighten all the way yet; we still need to route the pneumatics.   </p> </li> </ol>"},{"location":"byop/wiring-and-pneumatics/connecting-to-mobo/#next-steps","title":"Next steps","text":"<p>Continue to connecting the pneumatics.</p>"},{"location":"byop/wiring-and-pneumatics/routing-x-umbilical/","title":"Routing the X Gantry Umbilical","text":"<p>For this, all you'll need is your freshly made X gantry umbilical cable, and your bag of zip ties. Note that we'll be plugging in the unlabeled end of the cables, as the labels are meant to help identify wires on on the motherboard side.</p>"},{"location":"byop/wiring-and-pneumatics/routing-x-umbilical/#plugging-in-the-cables","title":"Plugging in the Cables","text":"<ol> <li> <p>First, plug in the four terminal connector with only three wires into the limit switch on the right side of the X gantry.   </p> </li> <li> <p>Plug in the small four terminal JST connector into the down camera.   </p> </li> <li> <p>Plug in the three terminal JST XH connector into the down ring light.   </p> </li> <li> <p>Plug in the six terminal JST XH connector with only four wires into the Z gantry stepper motor in the center of the X gantry.   </p> </li> <li> <p>Lastly, plug the last remaining cable (four terminal connector with four wires, not JST XH) into the left gantry rotation stepper motor.   </p> </li> </ol>"},{"location":"byop/wiring-and-pneumatics/routing-x-umbilical/#securing-the-cables","title":"Securing the Cables","text":"<ol> <li> <p>Align the cable bundle with the <code>X Gantry Back</code> as shown in the picture below, and secure it to the guide with two large zip ties.    </p> </li> <li> <p>Secure the left motor cable using a small zip tie and the slot in the <code>X Gantry Front</code> </p> </li> </ol>"},{"location":"byop/wiring-and-pneumatics/routing-x-umbilical/#securing-to-the-frame","title":"Securing to the Frame","text":"<ol> <li> <p>Move the Y gantry all the way to the back of the machine until you feel it hit the limit of travel, and do the same with the X gantry to the right of the machine. This will ensure that you don't fasten the cable too tightly such that it restricts the machine's motion.</p> </li> <li> <p>Then, take the cable bundle and guide it along the <code>Umbilical Swivel</code> and around the cable bundle. Do not tighten yet, as we still need to route the pneumatic tubing through these zip ties.   </p> </li> <li> <p>Now route the cable bundle through the two loose zip ties you attached in the <code>Frame Umbilical Mount</code> in the last step. Don't tighten these yet; we still need to route the pneumatics.   </p> </li> </ol>"},{"location":"byop/wiring-and-pneumatics/routing-x-umbilical/#next-steps","title":"Next steps","text":"<p>Continue to connecting the cables to the motherboard.</p>"},{"location":"byop/wiring-and-pneumatics/routing-y-umbilical/","title":"Routing the Y Gantry Umbilical","text":"<p>For this, all you'll need is your freshly made Y gantry umbilical cable bundle, and your bag of zip ties. Note that we'll be plugging in the unlabeled end of the cables, as the labels are meant to help identify wires on on the motherboard side.</p>"},{"location":"byop/wiring-and-pneumatics/routing-y-umbilical/#securing-to-the-y-gantry","title":"Securing to the Y gantry","text":"<ol> <li> <p>To begin, plug in the four terminal connector with only three wires into the X Limit Switch on the left side of the Y Gantry.   </p> </li> <li> <p>Plug in the other connector (six terminal connector with only four wires) into the X Axis Stepper Motor, also on the left side of the Y Gantry.   </p> </li> <li> <p>Align the cable bundle as shown in the picture below, and secure the cable to the <code>Y Gantry Umbilical Mount</code> with three big zip ties.   </p> </li> <li> <p>Lastly, plug in the Y axis limit switch using the YL cable.</p> </li> </ol>"},{"location":"byop/wiring-and-pneumatics/routing-y-umbilical/#securing-to-the-frame","title":"Securing to the frame","text":"<ol> <li> <p>Insert the <code>Umbilical Swivel</code> </p> </li> <li> <p>Move the Y gantry all the way to the back of the machine until you feel it hit the limit of travel. This will ensure that you don't fasten the cable too tightly such that it restricts the machine's motion.</p> </li> <li> <p>Pass the loose end of the wiring bundle through one of the holes in the <code>Umbilical Swivel</code></p> </li> <li> <p>Take the cable bundle and guide it along the curved recess in the <code>Frame Umbilical Mount</code>. Take two zip ties and loosely secure them through the zip tie guides and around the cable bundle. Do not tighten them yet, as we still need to route the X gantry cable bundle through this same pair of zip ties.   </p> </li> </ol>"},{"location":"byop/wiring-and-pneumatics/routing-y-umbilical/#next-steps","title":"Next steps","text":"<p>Continue to routing the X gantry umbilical.</p>"},{"location":"byop/wiring-and-pneumatics/sheathing-umbilicals/","title":"Sheathing the Umbilicals","text":"<p>Now we'll assemble the two umbilical cables in the machine. The one connecting from the front left leg to the left side of the Y gantry is the Y gantry umbilical, and the one connecting from the front left leg to the X gantry is the X gantry umbilical.</p>"},{"location":"byop/wiring-and-pneumatics/sheathing-umbilicals/#y-gantry-umbilical","title":"Y Gantry Umbilical","text":"<p>This cable bundle will contain the following:</p>    Qty Part     1 X axis limit switch cable (XL)   1 X axis motor cable (XM)   2 Heatshrink tubing (large)   1150 mm (45 in) Woven sheathing    <ol> <li> <p>To begin, we'll get these two cables laid out at the correct spacing. XL and XM should be perfectly aligned on the label side, no offset.</p> </li> <li> <p>Measure out 1150mm of sheathing and cut it from the rest of the spool.   </p> </li> <li> <p>Take the piece of sheathing and expand it by compressing it. You should find that inserting the two cables at the correct offset will maintain this offset while pushing the sheathing over them. Follow the pictures below for a good method of pushing the cables through the sheathing. If it starts to fray a little bit, don't worry! This is purely a cosmetic step; you can trim off any frayed bits and use the heatshrink to clean up the ends.     </p> </li> <li> <p>Push the sheathing up until there's equal amount of exposed black cable of the shorter cable, as shown below.   </p> </li> <li> <p>With the sheathing an equal distance from the closest connector on each side, slide two pieces of heatshrink tubing over the fraying end of the sheathing, with equal amounts on the cables and on the sheathing. This is to hold the sheathing in place, keep it from fraying, and generally making it look nicer. Use a heat gun or lighter to heat the heatshrink tight onto the cable.     </p> </li> </ol>"},{"location":"byop/wiring-and-pneumatics/sheathing-umbilicals/#x-gantry-umbilical","title":"X Gantry Umbilical","text":"<p>This cable bundle will contain the following:</p>    Qty Part     1 Z axis limit switch (ZL)   1 Z axis motor cable (ZM)   1 Left rotation motor cable (LM)   1 Top light cable (DL)   1 Top camera usb cable (longer usb cable()   2 Heatshrink tubing (large)   1475 mm (58 in) Woven sheathing    <ol> <li> <p>To begin, we'll get these five cables laid out at the correct spacing. Having these spaced correctly ensures that every cable reaches every plug with strain relief and length for movement. Use the image below to make the correct spacing.   </p> </li> <li> <p>Once you have the spacing correct, use a short zip tie to hold them together at this spacing to preserve it while sheathing.    </p> </li> <li> <p>Now, cut a 1475mm piece of sheathing from the remainder and expand it by compressing it. You should find that inserting the cables at the correct offset will maintain this offset while pushing the sheathing over them. If it starts to fray a little bit, don't worry! This is purely a cosmetic step; you can trim off any frayed bits and use the heatshrink to clean up the ends.</p> </li> <li> <p>With the sheathing an equal distance from the closest connector on each side, slide two pieces of heatshrink tubing over the fraying end of the sheathing, with equal parts on the cables and on the sheathing. This is to hold the sheathing in place, keep it from fraying, and generally making it look nicer. Use a heat gun or lighter to heat the heatshrink tight onto the cable.</p> </li> </ol>"},{"location":"byop/wiring-and-pneumatics/sheathing-umbilicals/#next-steps","title":"Next steps","text":"<p>Continue to routing the Y gantry umbilical.</p>"},{"location":"byop/wiring-and-pneumatics/wiring-y-motors/","title":"Wiring the Y Motors","text":"Qty Part     1 Y1 Cable Harness (Labeled Y1)   1 Y2 Cable Harness (Labeled Y2)   4 Zip Tie   4 FDM-0016 (Cable Clip)   3 FDM-0023 (Cable Clamp)   3 M3x14 machine screw   3 M3 Hex Nut    <p>The left and right Y motors are connected to the motherboard using the cable harnesses Y1 and Y2, respectively. Grab these from your bundle of cables.</p> <ol> <li> <p>Start by plugging in the unlabeled end of the cables into the Y motors. <code>Y1</code> goes to the left Y motor, and <code>Y2</code> goes to the right Y motor.    </p> </li> <li> <p>Use four zip ties to secure the wires in place using the channels in the back legs as shown below.     </p> </li> <li> <p>Next, put your LumenPnP up on its haunches, and route the cables along the inside groove of the extrusion extrusions running towards the front of the machine. Use <code>Cable Clips</code> to hold the cables in place along the extrusions.    </p> </li> <li> <p>Use three <code>Cable Clamps</code>, three M3x14mm bolts, and three M3 nuts to hold the right side cable on the staging plate and route it towards the motherboard neatly.     </p> </li> <li> <p>Route the cables underneath the motherboard for now; we'll plug them in in a later step.</p> </li> </ol>"},{"location":"byop/wiring-and-pneumatics/wiring-y-motors/#next-steps","title":"Next steps","text":"<p>Continue to sheathing the umbilicals.</p>"},{"location":"misc/maintenance-upgrades/rev3-vac-interposer/","title":"REV03 Motherboard Interposer Installation Guide","text":"<p>This guide is for installing the Vacuum Sensor Interposer Boards. Some early units of the LumenPnP shipped with a standard vacuum sensor on the motherboard that has a signal swing of a few hundred units. Because of some variability in the components used, this swing can be too small to get a usable signal for vacuum part-pick detection. This installation makes the signal swing much larger, making it easier to get a usable signal from the sensor.</p> <p>We're sorry about this! In our internal testing of this feature, we found that the swing was large enough to detect a missed pick accurately, but we didn't test comprehensively enough to ensure it was always the case for every board. We've changed the way we test features before boards leave our facility to catch these types of issues.</p>  <p>Help<p>If you at any time run into trouble or are unsure of how to proceed with this guide, please reach out to our customer support line and we'll get you up and running.</p> </p>"},{"location":"misc/maintenance-upgrades/rev3-vac-interposer/#timing","title":"Timing","text":"<p>This process should take about 60 minutes.</p>"},{"location":"misc/maintenance-upgrades/rev3-vac-interposer/#tools-needed","title":"Tools Needed","text":"<ul> <li>Hot Air Gun</li> <li>Soldering Iron</li> <li>Tweezers</li> <li>Solder</li> <li>Solder Wick</li> <li>2x Interposer PCBAs</li> <li>Your REV03 Motherboard</li> </ul>"},{"location":"misc/maintenance-upgrades/rev3-vac-interposer/#installation","title":"Installation","text":"<ol> <li> <p>If your board looks like the image below, then you do not have the interposers installed, and this guide is for you! If your vacuum sensors have a little green board between them and the motherboard, you're all set and don't need to perform this installation.    </p> </li> <li> <p>First, you'll need to remove the existing vacuum sensors. You'll find them near the USB-C connector labeled \"VAC1\" and \"VAC2\". Using your hot air gun, apply heat to the legs of one of the vacuum sensors on your motherboard. Wait until you see the solder become molten and shiny, then gently remove the sensor from the PCB using tweezers. Perform the same operation for the second sensor.</p> <p>  </p>  <p>Warning<p>Be careful not to tug too hard on the sensor. It's held down to the PCB with just a few copper pads, and pulling too hard might result in lifting those pads off the PCB. Make sure the solder is completely molten and the sensor should come away easily.</p> </p>  </li> <li> <p>Remove any remaining solder on the vacuum sensor pads. The pads need to be cleaned and flat for the interposer installation. Use solder wick (and flux if necessary) to remove any solder from the six pads that make up each vacuum sensor footprint. Clean up any excess flux or solder residue.     </p> </li> <li> <p>Now you can install an interposer board. First, make sure you have the correct board orientation. The bottom of the board has six pads that match the vacuum sensor footprint on the board. Make sure they line up with the footprint and that a bit of the interposer board is hanging off of the edge of the motherboard.           Correct orientation</p>  <p>Make sure the six pads of the footprint on the motherboard align with the six plated edges of the interposer board.</p>  </li> <li> <p>Add a bit of solder to one of the pads on the motherboard, and tack the interposer in place with a bit of solder on one of the pads. Apply heat to this joint while you align the interposer board using your tweezers.      </p> </li> <li> <p>Once your board is aligned with the pads and tacked in place, apply solder to the remaining five pads. Make sure that you have a good fillet of solder connecting the interposer board to the pad on the motherboard.</p>  </li> <li> <p>Repeat steps 4 and 5 with the second interposer board and the second vacuum footprint on the motherboard.</p> <p>  </p> </li> <li> <p>Check to make sure that the sensor is working properly. Connect to the motherboard with your computer and try sending some GCode commands to it with a GCode sender. We recommend using CNCjs.</p> <ul> <li>First sensor command: <code>M3426 G2 C1 I1 A110</code></li> <li>Second sensor command: <code>M3426 G2 C2 I1 A110</code></li> </ul> <p>When at ambient pressure, the response from each sensor should look something like this: <code>V:29800 C:1 G:2 I:1</code> Make sure the <code>V</code> value is about <code>29800</code>. Don't worry if it's not exact. As long as it's within <code>500</code> of <code>29800</code>, it's an acceptable value.</p> <p>If both sensors return an acceptable value, proceed to the next step.</p> </li> <li> <p>Next, check the sensor readings when connected to the pneumatic system. Push the vacuum line onto the <code>VAC1</code> sensor. Install the N045 nozzle tip onto the nozzle. Next, turn on the pump for nozzle 1 and its valve using these commands:</p> <p><code>M106                  ;turn on pump 1</code></p> <p><code>M106 P1 S255          ;turn on valve 1</code></p> </li> <li> <p>With the pump and valve on, read the pressure from the first vacuum sensor:</p> <p><code>M3426 G2 C1 I1 A110</code></p> <p>You should read a value of about <code>15500</code>. Don't worry if it's not exact. As long as it's within <code>13000</code> - <code>18000</code>, it's an acceptable value. Record this number.</p> </li> <li> <p>Now, cover the tip of the nozzle with your finger and re-run the command. Make sure the pump and valve are still running. Record this number. Turn off the pump and valve using the following commands:</p> <p><code>M107                  ;turn off the pump</code></p> <p><code>M107 P1               ;turn off the valve</code></p> <p>You should read a value that is around <code>2000</code> less than the uncovered value. Record this number.</p> </li> <li> <p>Remove the vacuum tube from <code>VAC1</code> and install it onto <code>VAC2</code>.</p> </li> <li>Repeat steps 9, 10, and 11 again to check the second sensor. You'll need to use <code>M3426 G2 C2 I1 A110</code> to read the pressure from the second sensor instead of the first.</li> <li>Remove the vacuum tube from <code>VAC2</code> and install it back onto <code>VAC1</code>.</li> <li>If any of the sensor values were not in the acceptable range, re-assess the soldering joints of the interposer board onto the motherboard and make sure they're all connected with a solid joint. If you are still unable to get a good reading, please reach out to our support line and we'll make sure you get up and running.</li> </ol>"},{"location":"misc/troubleshooting/","title":"Troubleshooting","text":"<p>There are several different sources of placement error in a pick and place system, and the LumenPnP is no different. Fortunately, most of these issues only need to be addressed once, and so once you've successfully placed components on your FTP, you'll have done the vast majority of the setup work needed to fine-tune your machine. After that, populating new PCBs on your LumenPnP will simply be a matter of setting up the board and feeder locations.</p> <p>Hopefully, you'll see a pattern to the placement errors on your machine. If that's the case, look at the list of Symptoms and narrow down the possible causes so that you only have to check some of the Solutions.</p>"},{"location":"misc/troubleshooting/diagnostic-routines/","title":"Diagnostic Routines","text":"<p>If you're having trouble picking and placing components but are having a hard time narrowing down the list of possibilities for what could be going wrong, this list of routines might help you find the culprit. The idea is to have you follow simple test steps to show the problem in limited situations so you have fewer possible root causes to check and solve.</p>"},{"location":"misc/troubleshooting/diagnostic-routines/#motion-system-check","title":"Motion System Check","text":"<p>The LumenPnP uses a lot of different offsets and calibrations for using its cameras to make precise movements. This test ignores those, and only tests the physical motion system of the machine.</p> <ol> <li>Jog the machine until the top camera is positioned somewhere recognizable, such as over a feeder. This will be your starting point.</li> <li>Next, pick another recognizable location as a target destination. For example, pick one of the component locations on your board.</li> <li>Make sure that neither of the locations you picked require that you click a button in OpenPnP that uses the cameras to find fiducial markers. We want to avoid that during this test.</li> <li>Move the machine back and forth between these two locations at least 5 times. Note which axes move: X, Y, and or Z.</li> </ol> <p>If the machine correctly travels repeatably to these two locations each time, then your motion system is likely healthy. The test has succeeded.</p> <p>If the machine does NOT correctly travel to these two locations repeatably, then something is wrong with your motion system. Check the following:</p> <ol> <li>Check the X, Y, Z axis belt tension</li> <li>Check the X, Y, Z axis motor pulleys to make sure they're not loose</li> <li>Check the stepper motors to make sure they're not overheating</li> <li>Check that the top camera isn't loose</li> <li>Check that the staging plate isn't loose</li> <li>Check that the tool head isn't crashing to reach one of the jog locations</li> </ol>"},{"location":"misc/troubleshooting/diagnostic-routines/#toolhead-offset-check","title":"Toolhead offset check","text":"<p>Incorrect tool head offsets will cause pick and place operations to fail. This test tunes the tool head offset directly without any use of computer vision or the cameras themselves. It is recommended to run the Motion System Check first before this test to rule out motion system repeatability issues first.</p> <ol> <li>Load one of your tray feeders</li> <li>Position the camera over the feeder location</li> <li>Switch to positioning the nozzle over the feeder location</li> <li>Look at the nozzle and see if it's position is in line with what you saw on the camera feed in step 2</li> <li>If not, adjust the toolhead offset by <code>0.05mm</code> at a time.</li> <li>Repeat from step 2 until the nozzle location is consistent with what you could see from the camera.</li> </ol>"},{"location":"misc/troubleshooting/solutions/","title":"Solutions","text":""},{"location":"misc/troubleshooting/solutions/#crashed-toolhead","title":"Crashed Toolhead","text":"<p>If the toolhead has crashed and one of the axis has skipped steps, it's likely there will be a placement offset. Try jogging to your homing fiducial and see if the camera is centered on it (Found under <code>Machine Setup -&gt; Heads -&gt; ReferenceHead H1</code> and clicking on the \"Jog camera to position\" button next to the Homing Fiducal coordinates). If not, it's likely that the machine has skipped steps. Rehome the machine to solve this issue. You can set soft limits in the <code>Machine Setup &gt; Axes</code> menus.</p>"},{"location":"misc/troubleshooting/solutions/#incorrect-toolhead-offset","title":"Incorrect Toolhead Offset","text":"<p>If the offset of the nozzle tip to the top camera is set incorrectly, the machine will place parts slightly offset from where they should be and may not pick them up correctly. Redo the Nozzle Offset Calibration to solve this issue. You may also tweak the values manually in OpenPnP under <code>Machine Setup -&gt; Heads -&gt; ReferenceHead H1 -&gt; Nozzles -&gt; ReferenceNozzle N1 -&gt; Offset Wizard -&gt; Nozzle head offsets</code>.</p>"},{"location":"misc/troubleshooting/solutions/#bad-fiducial-scan","title":"Bad Fiducial Scan","text":"<p>It's possible that when OpenPnP scans for the fiducials on your PCB, it actually found a bright section of silkscreen or another pad, and that shifted all the placements on your board. Rerun your fiducial scan and check to see if OpenPnP is correctly finding the fiducial. Instructions for tuning a vision pipeline for fiducials can be found here.</p>"},{"location":"misc/troubleshooting/solutions/#incorrect-feeder-z-position","title":"Incorrect Feeder Z Position","text":"<p>Picking can sometimes fail if the nozzle is either too far away from the part, or too close. Jog your nozzle tip about 1mm above a part in your feeder, and turn on the PV actuator to activate the vacuum. Now, slowly jog the Z axis down 0.1mm until you see the part jump onto the tip, and hear the pump strain against the vacuum. Jog one final 0.1mm down after this, and set your feeder Z position to your current Z position.</p>"},{"location":"misc/troubleshooting/solutions/#paste-inside-nozzle-tip","title":"Paste Inside Nozzle Tip","text":"<p>Sometimes the nozzle tip may dip into a bit of solder paste on your PCB. This can cause a blockage and prevent a part from being picked correctly. If you're finding that parts refuse to stick to your nozzle, try checking the nozzle tip for a blockage and clear it out with some small gauge wire, or some pressurized air.</p>"},{"location":"misc/troubleshooting/solutions/#pick-dwell-time-too-short","title":"Pick Dwell Time Too Short","text":"<p>If OpenPnP does not give the machine enough time to pull a proper vacuum and grab the part before moving the nozzle tip away from the pick location, the part can fail to pick. Try increasing the pick dwell time for the nozzle tip you're using under <code>Machine Setup -&gt; Nozzle Tips -&gt; ReferenceNozzleTip N__ -&gt; Dwell Times -&gt; Pick Dwell Time</code></p>"},{"location":"misc/troubleshooting/solutions/#place-dwell-time-too-short","title":"Place Dwell Time Too Short","text":"<p>If OpenPnP does not give the machine enough time to release the vacuum and drop the part onto the board before moving the nozzle tip away from the place location, the part can fail to place. Try increasing the place dwell time for the nozzle tip you're using under <code>Machine Setup -&gt; Nozzle Tips -&gt; ReferenceNozzleTip N__ -&gt; Dwell Times -&gt; Place Dwell Time</code></p>"},{"location":"misc/troubleshooting/solutions/#board-z-height-incorrect","title":"Board Z Height Incorrect","text":"<p>If the Board Z Height is set too high, the nozzle will not press the part firmly into the solder paste which helps it stay in place. Try tuning your board's Z position by bring it down in 0.1mm increments and testing placements between each tweak to see if parts are being pushed into the paste more firmly.</p>"},{"location":"misc/troubleshooting/solutions/#brass-nozzle-holder-loose","title":"Brass Nozzle Holder Loose","text":"<p>If not tightened into the motor properly, sometimes the brass nozzle holder can come loose and cause incorrect placements. Ensure that your nozzle holder is tightened into the hollow shaft stepper motor tightly.</p>"},{"location":"misc/troubleshooting/solutions/#loose-pulley","title":"Loose Pulley","text":"<p>Check the pulleys attached to each motor for play. While the machine is powered and homed, try pushing or pulling on the X, Y, and Z axes. If the axis can be moved by hand back and forth without causing the motor to skip steps, then the pulley on that axis probably needs to be tightened down onto the motor shaft.</p> <ol> <li>Power off the LumenPnP</li> <li>Loosen the belt tension for the axis you're working on</li> <li>Remove the motor from its mount</li> <li>Check that the pulley is fully secured</li> <li>Tighten the grub screws holding the pulley on the motor shaft</li> <li>Reinstall the motor</li> <li>Re-tighten the timing belt</li> <li>Power on the LumenPnP</li> <li>Home the machine</li> <li>Make sure that the play in that axis is gone.</li> </ol>"},{"location":"misc/troubleshooting/solutions/#belt-tension","title":"Belt Tension","text":"<p>If the nozzle or camera is failing to repeatably move to the same position, it's likely that one of your timing belts do not have sufficient tension. Check the belt tensioner arms on the X and both Y axis and ensure they're tight, and difficult to pull away from the machine any further.</p>"},{"location":"misc/troubleshooting/solutions/#usb-hub-overload","title":"USB Hub Overload","text":"<p>Some computers' internal USB controllers are unable to process a webcam feed from both webcams through the same USB port. If you are unable to get both webcams to appear in OpenPnP, try unplugging one from the motherboard and plugging it directly into your computer. For more information about this, check out the camera testing section of the assembly instructions.</p>"},{"location":"misc/troubleshooting/solutions/#camera-drop-down-selected","title":"Camera Drop-Down Selected","text":"<p>If you're finding that trying to manually jog the Z axis of your machine does not work, check the drop-down in the \"Machine Controls\" section of the UI underneath the cameras, and select the Nozzle instead of the Camera. This should allow you to jog your Z axis.</p>"},{"location":"misc/troubleshooting/solutions/#bottom-vision-error","title":"Bottom Vision Error","text":"<p>See bottom vision pipeline adjustment.</p>"},{"location":"misc/troubleshooting/solutions/#check-vacuum-pump","title":"Check Vacuum Pump","text":"<ol> <li>Press down on the quick connect coupler P</li> <li>Pull out the plastic tubing from your tool head.</li> <li>Turn on the vacuum pump</li> <li>Turn on the valve</li> <li>Put your finger over the end of the tubing</li> <li>If you can't feel suction:</li> <li>You may have a leak in the tubing</li> <li>You may have wired your pump or valve incorrectly</li> <li>Your valve or pump may be damaged, check the noises they make</li> </ol>"},{"location":"misc/troubleshooting/solutions/#check-board-rotation","title":"Check Board Rotation","text":"<ol> <li>Re-run the board fiducials</li> <li>Check various placement locations by moving the camera over them to make sure they're set correctly.</li> <li>If the placement locations are NOT lining up with the reticle in the camera feed:</li> <li>Adjust your board fiducial pipeline,</li> <li>Or manually set your board's location and position with \"set board location with multiple placements\" icon button.</li> <li>If the placement locations DO line up with the reticle in the camera feed:</li> <li>Check your nozzle offset</li> <li>Check your part identification vision pipeline</li> <li>(unlikely) Check for backlash and other mechanical issues with your motion system.</li> </ol>"},{"location":"misc/troubleshooting/solutions/#check-endstops","title":"Check Endstops","text":"<p>Check for something obstructing your end stops or triggering them early</p>"},{"location":"misc/troubleshooting/solutions/#check-staging-plate","title":"Check Staging Plate","text":"<p>If your staging plate comes loose, all of your locations defined in OpenPnP will start to be incorrect. Your machine may fail to home because it won't be able to find the homing fiducial. And it'll have trouble consistently picking components from the feeder. And it will probably place components in the wrong place on the PCB.</p> <ol> <li>Tighten all four screws holding the staging plate in place</li> <li>Reset your homing fiducial location</li> <li>Reset your feeder locations</li> <li>Reset your board location</li> </ol>"},{"location":"misc/troubleshooting/solutions/#check-mm-to-pixel-calibration","title":"Check mm to Pixel Calibration","text":"<p>Redo the steps in mm/pixel Calibration</p>"},{"location":"misc/troubleshooting/solutions/#check-fisheye-calibration","title":"Check fisheye calibration","text":"<p>Redo the steps in Camera Fisheye Calibration</p>"},{"location":"misc/troubleshooting/solutions/#check-board-location","title":"Check Board Location","text":"<p>Go to the list of placements and position the top camera over a few of them. If they're all offset a little bit, your board location is probably incorrect. Redo Finding the FTP Board Location.</p>"},{"location":"misc/troubleshooting/symptoms/","title":"Symptoms","text":""},{"location":"misc/troubleshooting/symptoms/#placements-offset-in-the-same-direction","title":"Placements Offset in the Same Direction","text":"<ol> <li>Crashed Toolhead</li> <li>Incorrect Toolhead Offset</li> <li>Bad Fiducial Scan</li> <li>Check Board Location</li> </ol>"},{"location":"misc/troubleshooting/symptoms/#parts-not-picking","title":"Parts Not Picking","text":"<ol> <li>Incorrect Feeder Z Position</li> <li>Incorrect Toolhead Offset</li> <li>Paste In Nozzle Tip</li> <li>Pick Dwell Time Too Short</li> <li>Loose Pulley</li> <li>Belt Tension</li> <li>Check Vacuum Pump</li> </ol>"},{"location":"misc/troubleshooting/symptoms/#parts-not-placing","title":"Parts Not Placing","text":"<ol> <li>Board Z Height Incorrect</li> <li>Place Dwell Time Too Short</li> <li>Replace your double-sided tape or try fresh solder paste</li> </ol>"},{"location":"misc/troubleshooting/symptoms/#parts-rotated-incorrectly","title":"Parts Rotated Incorrectly","text":"<ol> <li>Bottom Vision Error</li> <li>Brass Nozzle Holder Loose</li> </ol>"},{"location":"misc/troubleshooting/symptoms/#some-placements-are-consistently-better-than-others","title":"Some placements are consistently better than others","text":"<ol> <li>Check Board Rotation</li> </ol>"},{"location":"misc/troubleshooting/symptoms/#inconsistent-positioning","title":"Inconsistent Positioning","text":"<ol> <li>Loose Pulley</li> <li>Belt Tension</li> <li>Check Endstops</li> <li>Check Staging Plate</li> </ol>"},{"location":"misc/troubleshooting/symptoms/#top-camera-not-positioning-over-homing-fiducial","title":"Top Camera not positioning over homing fiducial","text":"<ol> <li>Loose Pulley</li> <li>Belt Tension</li> <li>Check Endstops</li> <li>Check Staging Plate</li> </ol>"},{"location":"misc/troubleshooting/symptoms/#cameras-dont-connect","title":"Cameras Don't Connect","text":"<ol> <li>USB Hub Overload</li> </ol>"},{"location":"misc/troubleshooting/symptoms/#z-axis-wont-jog","title":"Z Axis Won't Jog","text":"<ol> <li>Camera Drop-Down Selected</li> </ol>"},{"location":"misc/troubleshooting/symptoms/#components-not-rotated-correctly-on-the-board","title":"Components not rotated correctly on the board","text":"<ol> <li>Check your vision pipeline</li> <li>Check that your nozzle holder is on tight</li> <li>Check that your nozzle is fully seated and lubricated</li> </ol>"},{"location":"misc/troubleshooting/symptoms/#tool-head-doesnt-move-correctly-when-jogging-from-the-camera-feed","title":"Tool head doesn't move correctly when jogging from the camera feed","text":"<ol> <li>Loose Pulley</li> <li>Belt Tension</li> <li>Check Endstops</li> <li>Check Fisheye Calibration</li> </ol>"},{"location":"misc/troubleshooting/symptoms/#components-not-recognized-by-bottom-camera","title":"Components not recognized by bottom camera","text":"<ol> <li>Bottom Vision Error</li> </ol>"},{"location":"misc/troubleshooting/vision-pipeline-adjustment/","title":"Vision Pipeline Adjustment","text":"<p>Computer vision is one of the most important and complicated elements of a pick and place machine, and the LumenPnP is no different. Vision is used in four main places:</p> <ol> <li>Finding your homing fiducial</li> <li>Finding the fiducial marks on your PCBs</li> <li>Finding the tips of your nozzles, and</li> <li>Confirming and orienting the parts the machine has picked up.</li> </ol> <p>We've included good settings in the default machine configuration to get you started, but you will likely need to tune the settings for your exact needs depending on the ambient light in your room, the settings you used when configuring your cameras, and the kinds of components you're placing. This page is to get you set up to place components for your FTP, and learn the basics of how adjusting computer vision works. For more information, we highly recommend reading the OpenPnP documentation.</p>"},{"location":"misc/troubleshooting/vision-pipeline-adjustment/#intro-to-vision-tuning","title":"Intro to Vision Tuning","text":""},{"location":"misc/troubleshooting/vision-pipeline-adjustment/#computer-vision-basics","title":"Computer Vision Basics","text":"<p>Computer vision used in OpenPnP takes photos from your top or bottom camera and passes them through a \"Pipeline\" of stages to identify what is in the image. Stages fall into a few categories:</p> <ol> <li>Manipulating the photo to make it easier for the computer to identify parts of the photo. For example: <code>Threshold</code>.</li> <li>Identifying certain elements of the photo. For example: <code>DetectCirclesHough</code>.</li> <li>Showing you more information on the screen so that you can build, debug, and tweak the pipeline. For example: <code>DrawCircles</code>.</li> </ol> <p>Because each of these kinds of stages live together in the pipeline, it can be a little confusing trying to decode how each stage works and what they're for.</p> <p>Each stage of the pipeline has \"parameters\" that control its function. For example, the <code>ImageWriteDebug</code> step will ask you for parts of a file name to use when saving a debug image. Another more typical example is the <code>Threshold</code> stage, which will use a <code>threshold</code> parameter to pick which parts of your image will become white, and which will become black.</p> <p>When editing your vision pipeline, you should be able to start with simply tuning the parameters for the stages in the default pipeline. As you get more experienced, and if you're setting up more complicated placement jobs, you may need to add more stages to the pipeline to fine tune it for your needs.</p>"},{"location":"misc/troubleshooting/vision-pipeline-adjustment/#pipeline-organization","title":"Pipeline Organization","text":"<p>As of the <code>2022-08-01_18-07-09.2a36a8d</code> update, OpenPnP added the \"Vision\" tab in the Machine Configuration section, which lets you create more specific pipelines for unique scenarios.  Now you can define multiple specific pipelines to handle identification of different PCB components differently if you're not able to build a single pipeline to accommodate them all. This adds more functionality, but can be confusing when getting started. In general we recommend having four main pipelines to get started (when doing the FTP and beyond):</p> <ol> <li>Finding your homing fiducial (Top Camera)</li> <li>Finding the fiducial marks on your PCBs (Top Camera)</li> <li>Finding the tips of your nozzles (Bottom Camera)</li> <li>Confirming and orienting the parts the machine has picked up. (Bottom Camera)</li> </ol> <p>Number 4 above is the one that you might expand when you move on to placing more complicated components. Note also that this \"Vision\" tab is brand new in OpenPnP, and so guidance here is subject to change as the new feature gets refined in future OpenPnP releases.</p>"},{"location":"misc/troubleshooting/vision-pipeline-adjustment/#pipeline-editing-view","title":"Pipeline Editing View","text":"<p>The pipeline editing view has several sections and features you should know about to make your tuning go more smoothly.</p> <ol> <li>The list of stages. Click on a stage to show it's results in the main view, and show its parameters in the stage settings.</li> <li>The main view. This shows the result of the currently selected stage unless a particular stage is pinned (see #5).</li> <li>Stage output. This shows error messages if there's a problem with your stage or pipeline.</li> <li>Stage settings. This lets you change the settings for the selected stage.</li> <li>Pin Image. This lets you keep the results of the currently selected stage on on main view, even if you select another stage. Use this to pin a debugging stage so that you can quickly see the results of changes to a stage you're editing.</li> </ol>"},{"location":"misc/troubleshooting/vision-pipeline-adjustment/#top-camera-vision-pipeline","title":"Top Camera Vision Pipeline","text":""},{"location":"misc/troubleshooting/vision-pipeline-adjustment/#homing-fiducials","title":"Homing Fiducials","text":"<p>If you find that the machine is having a hard time finding the homing fiducial, you might need to edit the Vision Pipeline. The iterative strategy here is:</p> <ol> <li>Open the Pipeline.</li> <li>Check the current output and identify the problem that is causing homing to fail.</li> <li>Adjust the stage settings to change the pipeline output.</li> <li>Review the new pipeline output.</li> <li>Return to step 2 as necessary.</li> </ol>"},{"location":"misc/troubleshooting/vision-pipeline-adjustment/#open-the-pipeline","title":"Open the Pipeline","text":"<ol> <li> <p>Click on the <code>Machine Setup</code> tab in the top right pane.   </p> </li> <li> <p>Click on the \"Expand\" checkbox if necessary.   </p> </li> <li> <p>Click on <code>Heads &gt; ReferenceHead H1</code>.   </p> </li> <li> <p>Click on the \"Position Camera over location\" icon button show below. This will move the top camera to where your datum board is mounted.   </p> </li> <li> <p>Confirm that your top camera is positioned exactly over the homing fiducial.   </p> </li> <li> <p>Adjust the exposure of your camera image as mentioned in the Homing Fiducial Section.</p> </li> <li> <p>Go to the <code>Vision</code> tab.   </p> </li> <li> <p>Select on <code>FiducialVision</code> from the type dropdown.   </p> </li> <li> <p>Select <code>- Default Machine Fiducial Locator -</code> from the pipeline list.   </p> </li> <li> <p>Click on Pipeline <code>Edit</code>.   </p> </li> </ol>"},{"location":"misc/troubleshooting/vision-pipeline-adjustment/#check-the-debug-results","title":"Check the debug results","text":"<ol> <li> <p>Click on the <code>DrawCircles</code> stage.   </p> </li> <li> <p>The main view will show a circle if OpenPnP was able to identify what it thinks is the homing fiducial.</p> <ol> <li>If there are more than one circle, then we need to more clearly distinguish the real homing fiducial.</li> <li>If there is one circle, but it is not correctly drawn around the homing fiducial, then we need to more clearly distinguish the homing fiducial.</li> <li>If there are no circles, we need to loosen the filtering to make the real homing fiducial easier to identify.</li> <li>If the image looks like the good one above, your pipeline is properly tuned. If you've still been getting failures when homing, you may need to slightly loosen the filtering.</li> </ol> </li> </ol>"},{"location":"misc/troubleshooting/vision-pipeline-adjustment/#adjust-pipeline","title":"Adjust Pipeline","text":"<ol> <li> <p>Click on the <code>Threshold</code> stage   </p> </li> <li> <p>Raise or lower the <code>threshold</code> parameter as necessary until the image is precise.</p> <ol> <li>If the image is too black, raise the <code>threshold</code> setting.</li> <li>If the image is too bright, lower the <code>threshold</code> setting.     </li> </ol> </li> <li> <p>Click on the <code>DrawCircles</code> stage and check if the fiducial has been correctly identified.   </p> </li> <li> <p>If not, pin the view of the <code>DrawCircles</code> stage.   </p> </li> <li> <p>Click on the <code>DetectCirclesHough</code> stage.   </p> </li> <li> <p>Raise or lower the <code>param2</code> parameter as necessary until the correct number of circles are identified.</p> <ol> <li>If there are no circles, lower the <code>param2</code> setting.</li> <li>If there are too many circles, raise the <code>param2</code> setting.</li> </ol> </li> </ol>"},{"location":"misc/troubleshooting/vision-pipeline-adjustment/#review-pipeline-output","title":"Review Pipeline Output","text":"<ol> <li> <p>When the fiducial is correctly identified, close the pipeline editor.   </p> </li> <li> <p>When prompted, save the edits you've made.   </p> </li> <li> <p>Try homing the machine to see if it can identify the homing fiducial.   </p> </li> </ol>"},{"location":"misc/troubleshooting/vision-pipeline-adjustment/#pcb-fiducials","title":"PCB Fiducials","text":"<ol> <li> <p>Go to the <code>Vision</code> tab.    </p> </li> <li> <p>Select on <code>FiducialVision</code> from the type dropdown.    </p> </li> <li> <p>Select <code>FIDUCIAL-1X2</code> from the pipeline list.  </p> </li> <li> <p>Click on Pipeline <code>Edit</code>.    </p> </li> <li> <p>Continue with the same procedure as the Homing fiducial section above.</p> </li> </ol>"},{"location":"openpnp/","title":"OpenPnP","text":"<p>OpenPnP is a piece of open source software designed to control pick and place machines. It supports a wide range of machines, with many features found in high-end commercial software. You can find out more about it here.</p> <p>These guides were designed with OpenPnP version <code>2022-08-01_18-07-09.2a36a8d</code> in mind, but they should work for other version as well.</p>"},{"location":"openpnp/#whats-on-this-site","title":"What's on this site?","text":"<ul> <li>How to configure and calibrate your LumenPnP in OpenPnP</li> <li>How to run a job on your LumenPnP using OpenPnP</li> </ul> <p>Let's dive in!</p>"},{"location":"openpnp/calibration/","title":"Calibration - Introduction","text":""},{"location":"openpnp/calibration/#what-youll-learn","title":"What you'll learn","text":"<p>This guide is focused on performing basic calibration for your LumenPnP. Specifically it will test the motion system, and calibrate the cameras so that they can identify objects and apply offsets to the toolhead for precise part picking and placing. These steps are usually only necessary when first setting up a LumenPnP for the first time.</p>"},{"location":"openpnp/calibration/#what-youll-need","title":"What you'll need","text":"<ul> <li>A LumenPnP with the mechanical and electrical build completed.</li> <li>Read through the OpenPnP Wiki. It'll be super important to getting going with your machine. These docs are meant to augment the OpenPnP docs, not replace them.</li> </ul>"},{"location":"openpnp/calibration/auto-toolchanger/","title":"Automatic Toolchanger Calibration","text":"<p>Throughout the course of a job, you will find that you need multiple different size nozzle tips to pick different sized components. By default OpenPnP will pause a job and wait for you to manually change a nozzle tip, but it can be more efficient to set up automatic tool changing. Perform the following optional steps for each of the nozzle tips you'll be switching between. We recommend reading the OpenPnP Wiki page about this as well.</p> <ol> <li> <p>Insert the labeled nozzle tips into the holder in their respectively labeled slots.   </p> </li> <li> <p>Apply some lubricant to the end of your nozzle holder with the lubrication packet included with your nozzles. This is important for repeatably fully attaching the nozzles without damaging the rubber O-rings around the holder.   </p> </li> <li> <p>Click on the <code>Machine Setup</code> tab in the top right pane.   </p> </li> <li> <p>Click on the \"Expand\" checkbox to open all of the features about your machine.   </p> </li> <li> <p>Select the nozzle you're working with. For example: <code>Nozzle Tips &gt; ReferenceNozzleTipN045</code> </p> </li> <li> <p>Select the <code>Tool Changer</code> tab.   </p> </li> </ol>"},{"location":"openpnp/calibration/auto-toolchanger/#capturing-positions","title":"Capturing Positions","text":"<p>Now we can start capturing positions. Automatic nozzle changing works by replaying four position commands either forward or backward to load or unload a nozzle tip, respectively. We're going to start with the last position, because it's easiest for getting our Z height correct. Note that the instructions below are for the N045 nozzle tip, but you should use whichever tip you're setting up.</p>  <p>Warning</p> <p>Be careful not to crash your nozzle tip or toolhead into any of the components mounted on your staging plate, especially the nozzle holder. Be especially careful if you have high amounts of backlash compensation, which can cause your tool head to move in unexpected directions when jogging to eliminate backlash. Be aware of your machine's Safe Z axis settings as well, as they can cause the tool head to raise between moves to avoid crashing, which may actually be undesirable here.</p>  <ol> <li> <p>Install the N045 nozzle onto the tool head by hand.   </p> </li> <li> <p>Jog the nozzle until it is directly in front of the N045 slot in the tool changer.   </p> </li> <li> <p>Adjust the Z height until it's clear it'll slide into the rack.   </p> </li> <li> <p>Double-check the toolhead is aligned with the slot in the Y axis so that only a X movement would be necessary to slot it into place. It may be a good idea to test-fit the nozzle into the slot by jogging the X axis only.</p> </li> <li> <p>Capture the nozzle position for the <code>Last Location</code>.   </p> </li> <li> <p>Move the nozzle into the slot by jogging the X axis in 0.1mm increments. Try to ensure there's no lateral strain on the nozzle holder in the Y axis. Continue until the nozzle is fully slotted into the nozzle holder.   </p> </li> <li> <p>Capture the <code>Third Location</code> nozzle position.   </p> </li> <li> <p>The next position is for making sure that the nozzle tip is completely seated on the CP40 holder during insertion. Jog the Z axis down approximately two millimeters. The spring in the CP40 holder will take up these few millimeters to avoid damage to the tool head. You may find that a larger or smaller movement gets the nozzle tip seated completely, so feel free to experiment.   </p> </li> <li> <p>Capture the <code>Second Location</code> nozzle position.   </p> </li> <li> <p>Now jog the Z axis up 30 millimeters. This is the clearance position where the nozzle holder is getting ready for the plunge.   </p> </li> <li> <p>Capture the <code>First Location</code> nozzle position.   </p> </li> <li> <p>You can now play through the positions by clicking on the \"move nozzle to position\" buttons in order. Tune any values in the fields as necessary to ensure you get a clean and straight insertion.   </p> </li> <li> <p>Apply the changes to the tool changing positions.   </p> </li> <li> <p>Repeat the above steps for each of the nozzles you're using. See also the \"Cloning Settings\" section in the OpenPnP docs.</p> </li> </ol>"},{"location":"openpnp/calibration/auto-toolchanger/#enable-automatic-tool-changing","title":"Enable Automatic Tool Changing","text":"<p>Now that your positions are set, you can enable automatic tool changing in OpenPnP.</p> <ol> <li> <p>Click on the <code>Machine Setup</code> tab in the top right pane.   </p> </li> <li> <p>Click on the \"Expand\" checkbox if necessary.   </p> </li> <li> <p>Select <code>Heads &gt; ReferenceHead H1 &gt; Nozzles &gt; ReferenceNozzle N1</code>.   </p> </li> <li> <p>Switch to the <code>Tool Changer</code> tab.   </p> </li> <li> <p>Check the <code>Automatic Tool Changer Enabled?</code> box.   </p> </li> <li> <p>Click <code>Apply</code> to save your changes.   </p> </li> <li> <p>Select <code>Heads &gt; ReferenceHead H2 &gt; Nozzles &gt; ReferenceNozzle N2</code>.   </p> </li> <li> <p>Switch to the <code>Tool Changer</code> tab.   </p> </li> <li> <p>Check the <code>Automatic Tool Changer Enabled?</code> box.   </p> </li> <li> <p>Click <code>Apply</code> to save your changes.   </p> </li> </ol>"},{"location":"openpnp/calibration/auto-toolchanger/#next-steps","title":"Next Steps","text":"<p>Next is the FTP.</p>"},{"location":"openpnp/calibration/backlash-compensation/","title":"Backlash Compensation","text":"<p>Semi-assembled (v3) LumenPnP machines should have only a limited amount of backlash in each axis and the default machine configuration in OpenPnP will typically account for it. This step is optional, and only necessary if you are still having issues with backlash. Read the OpenPnP docs page about automatic backlash compensation here.</p>"},{"location":"openpnp/calibration/backlash-compensation/#set-up-acceleration-control","title":"Set Up Acceleration Control","text":"<ol> <li> <p>Click on the <code>Machine Setup</code> tab in the top right pane.   </p> </li> <li> <p>Click on the \"Expand\" checkbox if necessary.   </p> </li> <li> <p>Select <code>GcodeDriver GcodeDriver</code> from the list.   </p> </li> <li> <p>Switch to the <code>gcode</code> tab.   </p> </li> <li> <p>Select <code>MOVE_TO_COMMAND</code> in the setting drop-down.   </p> </li> <li> <p>Paste the following into the large text box:</p> <p><code>{Acceleration:M204 S%.2f} G1 {X:X%.4f} {Y:Y%.4f} {Z:Z%.4f} {A:A%.4f} {B:B%.4f} {FeedRate:F%.2f} ; move to target</code> </p> </li> <li> <p>Click <code>Apply</code> to save your changes.   </p> </li> <li> <p>Switch to the <code>Driver Settings</code> tab.   </p> </li> <li> <p>Change the Motion Control Type to <code>ConstantAcceleration</code>. Note that you may want to change this back to <code>ToolpathFeedRate</code> when you're done running the backlash calibration.   </p> </li> <li> <p>Click <code>Apply</code> to save your changes.   </p> </li> </ol>"},{"location":"openpnp/calibration/backlash-compensation/#running-the-calibration","title":"Running The Calibration","text":"<ol> <li> <p>Click on the <code>Machine Setup</code> tab in the top right pane.   </p> </li> <li> <p>Click on the \"Expand\" if necessary.   </p> </li> <li> <p>Click on <code>Axes &gt; ReferenceControllerAxisX</code>.   </p> </li> <li> <p>Select the <code>Backlash Compensation</code> tab.   </p> </li> <li> <p>Next, click the <code>Calibrate now</code> button. The machine will go through a long routine (between 5-15 minutes) where it measures the machine's backlash, and determines the best settings to account for it.</p> </li> <li> <p>When it's done, you'll see the output data from the calibration. We suggest selecting <code>OneSidedPositioning</code> for the Compensation Method, but experiment with the different options to see which gives you the best results.   </p> </li> <li> <p>Restart from step 10 with the Y axis selected.</p> </li> </ol>"},{"location":"openpnp/calibration/backlash-compensation/#next-steps","title":"Next Steps","text":"<p>Next is Automatic Toolchanger Calibration.</p>"},{"location":"openpnp/calibration/bottom-camera-position/","title":"Bottom Camera Position","text":"<p>Now that we know the offset from the top camera to the nozzle, we can use the nozzle to set our bottom camera position.</p>  <p>Bottom Camera Z Position: v2 and v3 LumenPnP Differences</p> <p>When inspecting the tip of the nozzle and parts that have been picked up, OpenPnP uses a saved Z height to bring the nozzle tip to so that it is in focus.</p> <p>Make sure your bottom camera Z position is set correctly based on your machine type and number of nozzles.</p> <p>v2 LumenPnP kits only have one tool head. The default Z-height is <code>61mm</code>. This is relatively high, and allows the bottom camera to see very large parts. But it is high enough that, if you have a second nozzle installed, the inactive nozzle can collide and cause damage.</p> <p>v3 semi-assembled LumenPnP machines come with two tool heads. To more safely accommodate this, the Z height is only <code>31.5mm</code>, and the bottom camera is mounted deeper below the Staging Plate. This ensures we can see large parts while preventing collisions with a second nozzle.</p> <ul> <li>If you're using one nozzle, set the bottom camera Z Location to <code>61mm</code> (Standard for v2 LumenPnP kits).</li> <li>If you're using two nozzles, set the bottom camera Z Location to <code>31.5mm</code> (Standard for v3 semi-assembled LumenPnP kits).</li> </ul>  <ol> <li> <p>Click on the <code>Machine Setup</code> tab in the top right pane.   </p> </li> <li> <p>Click on the \"Expand\" checkbox to open all of the features about your machine.   </p> </li> <li> <p>Click on <code>Cameras &gt; OpenPnpCaptureCamera Bottom</code>.   </p> </li> <li> <p>Click on the <code>Position</code> tab.   </p> </li> <li> <p>Set the camera's Z-axis location:</p> <ul> <li>If you have a v2 LumenPnP kit with only one nozzle, set the Z axis value to <code>61mm</code>.</li> <li>If you have a v3 semi-assembled LumenPnP with two nozzles, set the Z axis value to <code>31.5mm</code>.   </li> </ul> </li> <li> <p>Home your LumenPnP to make sure your toolhead's location is accurate. As before, ignore the <code>Nozzle tip calibration: not enough results from vision. Check pipeline and threshold</code> error if it appears.   </p> </li> <li> <p>Jog the toolhead off to the side so that it isn't aligned with any calibration points. This will make it easier to see if the nozzle is lined up with the bottom camera.   </p> </li> <li> <p>Select the <code>Nozzle: N1 - N045 (Head:H1)</code> from the machine controls dropdown.   </p> </li> <li> <p>Click the \"Position tool over location\" button to bring the left nozzle very roughly above the bottom camera.   </p> </li> <li> <p>Jog the toolhead until the left nozzle is directly in the center of the bottom camera's vision.   </p> </li> <li> <p>If the tip of the nozzle isn't in focus, rotate the bottom camera lens to set it in focus. Re-center the nozzle in the camera view if necessary.   </p> </li> <li> <p>Click the \"Capture Toolhead Location\" button to calculate the correct position for the bottom camera.   </p> </li> <li> <p>Click the <code>Apply</code> button to save the new camera position.   </p> </li> <li> <p>Try homing your machine again. If you get the <code>Nozzle tip calibration: not enough results from vision. Check pipeline and threshold</code> error, you will need to tune your Bottom Camera Vision Pipeline.   </p> </li> </ol>"},{"location":"openpnp/calibration/bottom-camera-position/#next-steps","title":"Next Steps","text":"<p>Next is Backlash Compensation.</p>"},{"location":"openpnp/calibration/camera-fisheye-cal/","title":"Camera Fisheye","text":"<p>Now that you're connected to the LumenPnP, you'll need to set up the cameras so that they can accurately fine-tune the machine's position. The LumenPnP is a robust machine, but it needs both cameras to make sure it can pick and place components reliably every time. The first step is to correct for the fisheye effect of the webcams to help make sure they can identify distances accurately. This is not a step you will need to re-run unless you replace your webcams or lenses. See the original OpenPnP documentation for reference.</p> <p>This calibration uses a specific pattern of dots to correct for any fisheye effect in your webcams</p> <ul> <li>If you have a v2 LumenPnP kit, you can find this pattern is on the back side of your datum board (shown below).</li> <li>If you have a v3 semi-assembled LumenPnP machine, you can find this pattern on the back side of the FTP board in your Getting Started Kit.</li> <li>If you're having a hard time getting the camera to pick up on the pattern on the datum board or FTP board, you can print out the original <code>Circle Grid Camera Calibration Patterns</code> here.</li> </ul>"},{"location":"openpnp/calibration/camera-fisheye-cal/#bottom-camera-calibration","title":"Bottom Camera Calibration","text":"<ol> <li> <p>Click on the <code>Machine Setup</code> tab.   </p> </li> <li> <p>Click on the \"Expand\" checkbox to open all of the features about your machine.   </p> </li> <li> <p>Click on <code>Cameras &gt; OpenPnpCaptureCamera Bottom</code>.   </p> </li> <li> <p>In the lower detail pane, switch to the <code>Lens Calibration</code> tab.   </p>  <p>Tip</p> <p>To see both camera views at the same time, click on the dropdown in the top left of the UI and select <code>Show All Vertical</code> or <code>Show All Horizontal</code>. </p>  </li> <li> <p>Click <code>Start Lens Calibration</code>.   </p> </li> <li> <p>Hold the pattern under the bottom camera as shown below. Use the camera view in OpenPnP to move the pattern into focus. If you can't get the whole pattern in focus and in the field of view, screw in the lens a few turns to adjust the camera's focal distance and try again. (The image shows calibrating the top camera, but it is the same process.)   </p>  <p>Tip</p> <p>If you're having trouble adjusting the focus, try using the community-created lens adjustment tool.</p>  </li> <li> <p>Slowly move the calibration pattern around the camera's field of view until OpenPnP tells you that it's gathered enough photos. OpenPnP will flash when it takes an image of the pattern, and will require you to take 25 pictures for an accurate calibration.   </p> </li> <li> <p>Confirm that the <code>Apply Calibration?</code> checkbox is enabled after calibration is complete.   </p> </li> </ol>"},{"location":"openpnp/calibration/camera-fisheye-cal/#top-camera-calibration","title":"Top Camera Calibration","text":"<ol> <li> <p>Again, navigate to the <code>Machine Setup</code> tab.</p> </li> <li> <p>Again, click the \"Expand\" checkbox if necessary.</p> </li> <li> <p>Navigate to <code>Heads &gt; ReferenceHead H1 &gt; Cameras &gt; OpenPnPCaptureCamera Top</code>.   </p> </li> <li> <p>Continue with the same steps starting from number 4 above.</p> </li> </ol>"},{"location":"openpnp/calibration/camera-fisheye-cal/#next-steps","title":"Next Steps","text":"<p>Next, we'll work on homing your machine with the Homing Fiducials.</p>"},{"location":"openpnp/calibration/connect-to-machine/","title":"Connecting to Your Machine","text":"<p>Awesome! Now we've got OpenPnP installed on your computer, and we've got the default configuration loaded up. Our next step is getting connected to the machine and getting familiar with OpenPnP's UI.</p> <ol> <li> <p>Connect your LumenPnP to your computer using the included USB cable</p> </li> <li> <p>Open OpenPnP on your computer. You should now see the OpenPnP UI:   </p> </li> </ol>"},{"location":"openpnp/calibration/connect-to-machine/#com-port-and-baud-rate","title":"Com Port and Baud Rate","text":"<p>Before connecting to the LumenPnP, you need to set which USB port to use for communication in OpenPnP.</p> <ol> <li> <p>Click on the <code>Machine Setup</code> tab.   </p> </li> <li> <p>Click on the \"Expand\" checkbox to open all of the features.   </p> </li> <li> <p>Under <code>Drivers</code> click on <code>GcodeDriver GcodeDriver</code>. Below the list of machine settings you'll find the details of the GcodeDriver.   </p> </li> <li> <p>In the <code>Configuration</code> tab, check the <code>Baud</code> and <code>Port</code> settings.</p> </li> <li>Set the <code>Baud</code> to <code>115200</code></li> <li>On Windows, Set the <code>Port</code> to the option in the format: <code>COM2</code>.</li> <li>On Mac, Set the <code>Port</code> to the option in the format: <code>cu.usbmodem&lt;a-lot-of-numbers&gt;</code></li> <li> <p>On Linux, Set the <code>Port</code> to the option in the format: <code>ttyACM0</code>.   </p>  <p>Port Not Found</p> <p>If your machine's port does not show up in the drop down, check that your USB cable is plugged in to both your computer and the LumenPnP. Also check that the motherboard is powered on. If you still cannot find the port, try pressing the reset button on the motherboard and closing and reopening OpenPnP.</p>  </li> <li> <p>Click <code>Apply</code> in the lower right corner to save your changes.   </p> </li> </ol>"},{"location":"openpnp/calibration/connect-to-machine/#bottom-camera-config","title":"Bottom Camera Config","text":"<p>Now we'll set up the cameras. The big red \"X\" in the camera views means that OpenPnP isn't receiving the webcam feed. We'll specify which webcam is which.</p>  <p>Camera Connection Issues (v2 Hardware)</p> <p>Because the motherboard in v2 LumenPnP kit machines has a built in USB hub you can plug both of the webcams into the motherboard, and then connect the motherboard to your computer with a single one USB cable. This keeps cables tidy, but it sends a lot of data through one single USB port on your computer.</p> <p>Unfortunately, from reports we've gotten from users, it seems that not all computer manufacturers include high-quality internal USB hubs. The lower quality hubs included in these computers can't handle the bandwidth requirements of two webcams plus the motherboard all on a single USB port. If this is the case for your computer, one or both of the webcams will be missing from the configuration list in OpenPnP or any other camera application.</p> <p>If you have this problem, you will need to plug at least one of the webcams directly into your computer via a separate USB port. Occasionally this can cause the webcam's name to be incorrect, but you'll still be able to select it from the drop-down list with a little trial and error.</p>  <ol> <li> <p>In the top-left corner, change the camera view to one of the \"Show All\" options. You should then see two camera feeds that are black, and have red X's on them.   </p> </li> <li> <p>Again, navigate to the <code>Machine Setup</code> tab.</p> </li> <li>Again, click the \"Expand\" checkbox if necessary.</li> <li> <p>Click on <code>Cameras &gt; OpenPnpCaptureCamera Bottom</code>.   </p> </li> <li> <p>In the lower detail pane, switch to the <code>Device Settings</code> tab.   </p> </li> <li> <p>In the <code>Device</code> drop-down, choose <code>PnP Bottom Camera</code>.   </p> </li> <li> <p>In the <code>Format</code> drop-down, choose the <code>1280x720 10fps</code> setting.   </p> </li> <li> <p>Click the <code>Apply</code> button in the bottom right. You should then see the camera display start showing the feed from the camera, or at least see the red X disappear. We'll fix the exposure next.    </p> </li> <li> <p>Adjust the exposure to make the camera feed more reasonable. On some computers, you can toggle Automatic Exposure on, and then back off again to set it correctly. Do not keep auto exposure turned on. You can come back to adjust the exposure later at any time.   </p> </li> </ol>"},{"location":"openpnp/calibration/connect-to-machine/#top-camera-config","title":"Top Camera Config","text":"<ol> <li>Again, navigate to the <code>Machine Setup</code> tab.</li> <li>Again, click the \"Expand\" checkbox if necessary.</li> <li> <p>Navigate to <code>Heads &gt; ReferenceHead H1 &gt; Cameras &gt; OpenPnPCaptureCamera Top</code>.   </p> </li> <li> <p>In the lower detail pane, switch to the <code>Device Settings</code> tab.   </p> </li> <li> <p>In the <code>Device</code> drop-down, choose <code>PnP Top Camera</code>.   </p> </li> <li> <p>In the <code>Format</code> drop-down, choose the <code>1280x720 10fps</code> setting.   </p> </li> <li> <p>Click the <code>Apply</code> button in the bottom right. You should then see the camera display start showing the feed from the camera, or at least see the red X disappear.   </p> </li> <li> <p>Adjust the exposure to make the camera feed more reasonable. Both cameras should now be working.   </p> </li> </ol>"},{"location":"openpnp/calibration/connect-to-machine/#connecting-to-the-lumenpnp","title":"Connecting to the LumenPnP","text":"<ol> <li> <p>Click the green power button in the Machine Controls section of the UI to connect to your machine.   </p> </li> <li> <p>The power button will turn red when OpenPnP has connected to your machine. If this doesn't work, check your port and baud rate.   </p> </li> <li> <p>Save your OpenPnP settings with <code>File &gt; Save Configuration</code>.   </p> </li> </ol>"},{"location":"openpnp/calibration/connect-to-machine/#next-steps","title":"Next Steps","text":"<p>Next, we'll work on the the camera's Fisheye Calibration.</p>"},{"location":"openpnp/calibration/homing-fiducial/","title":"Homing Fiducial","text":"<p>Now that fisheye calibration is complete, we can set up the datum board. The datum board is a reference point for everything else you'll do with the machine. The center dot of the datum board will be the most important calibration point for the machine. It'll be used to fine-tune the LumenPnP's XY position after homing to account for any errors in the limit switches.</p>  <p>If Your Machine Is v2</p> <p>If you are setting up a v2 LumenPnP kit, your datum board is not yet mounted to the Staging Plate.</p> <p>Use four M3x16mm screws and four M3 nuts to secure the datum board and datum board mount to the staging plate on the rear of the bottom camera, through holes: B18, A19, A21, B22. The the fisheye calibration pattern should be facing down, and the gold grid lines and fiducial in the center of the Opulo logo facing upwards. Tighten this down securely. </p>  <ol> <li> <p>In the \"Machine Controls\" pane in the lower left, connect to the LumenPnP by pressing the power button (if you haven't already).   </p> </li> <li> <p>Run a rough home routine by pressing the Home button (shaped like a house). The machine will move to the X, Y, and Z zero positions. Note that the home icon will turn yellow, as the LumenPnP has homed to it's end stops, but hasn't completed its full homing routine. You will may still get one of two error messages: <code>FIDUCIAL-HOME no matches found.</code> or <code>Nozzle tip calibration: not enough results from vision. Check pipeline and threshold</code> This is normal; ignore the errors for now.   </p> </li> </ol>"},{"location":"openpnp/calibration/homing-fiducial/#tuning-the-homing-fiducial","title":"Tuning the Homing Fiducial","text":"<ol> <li> <p>Click on the <code>Machine Setup</code> tab in the top right pane.   </p> </li> <li> <p>Click on the \"Expand\" checkbox to open all of the features about your machine.   </p> </li> <li> <p>Click on <code>Heads &gt; ReferenceHead H1</code>.   </p> </li> <li> <p>In the bottom right details pane, change the <code>Homing Method</code> to <code>ResetToFiducialLocation</code>. This will set OpenPnP to use the top camera to look for the homing fiducial to more precisely home the XY gantry, instead of only using the limit switches.   </p> </li> <li> <p>Click <code>Apply</code> to save this change.   </p> </li> <li> <p>Click on the \"Position Camera over location\" icon button show below. This will move the top camera to approximately where your datum board is mounted.   </p> </li> <li> <p>In the bottom left Machine Controls pane, Select the <code>Actuators</code> tab.   </p> </li> <li> <p>Turn on the LED ring lights by pressing the <code>LED</code> button (if they're not already on).   </p> </li> <li> <p>Rotate the Top Camera lens until the board is sharply in focus. If you're having trouble, try using the community-created lens adjustment tool.   </p>  <p>Tip</p> <p>Right click on the camera feed to change the Reticle style to see the center of the camera image. You can also use the scroll wheel to zoom in on the feed for more precision. </p>  </li> <li> <p>Go back to the <code>Jog</code> tab in the \"Machine Controls\" pane.   </p> </li> <li> <p>Set the <code>Distance</code> slider to <code>0.1</code> for more precise movements.   </p> </li> <li> <p>Manually jog the head so that the reticle in the center of the Top Camera feed in your top camera view is perfectly centered on the Homing Fiducial in the center of the Opulo logo.    </p> </li> </ol>"},{"location":"openpnp/calibration/homing-fiducial/#double-check-camera-exposure","title":"Double-Check Camera Exposure","text":"<p>As before, we're going to double-check our camera exposure.</p> <ol> <li> <p>Navigate to the <code>Machine Setup</code> tab.   </p> </li> <li> <p>Click the \"Expand\" checkbox if necessary.   </p> </li> <li> <p>Navigate to <code>Heads &gt; ReferenceHead H1 &gt; Cameras &gt; OpenPnPCaptureCamera Top</code>.   </p> </li> <li> <p>In the lower detail pane, switch to the <code>Device Settings</code> tab.   </p> </li> <li> <p>Right click on the camera feed to enable the image info card. This will give you the brightness histogram of the image. In the next step, you'll want to tune your exposure and other camera settings so the image isn't too bright or too dark. The histogram can help: make sure the graph isn't going all the way to the edges of the X axis in the histogram, and that will make sure all of the image's details are available for the computer to use when it is looking for the homing fiducial.     </p> </li> <li> <p>Adjust the exposure and other camera settings. The goal is to make the image clear and have a lot of contrast, without being too bright or too dark overall. In some cases you can simply check the <code>Auto</code> checkbox for <code>Exposure</code>, then uncheck it to save the automatically set value.   </p>  <p>For Mac Users</p> <p>Due to an issue with the camera driver in OpenPnP, some Mac users might notice that the image settings are greyed out for you. There's a fantastic open-source application called CameraController that can be used to edit these settings.</p>  </li> </ol>"},{"location":"openpnp/calibration/homing-fiducial/#apply-homing-fiducial-changes","title":"Apply Homing Fiducial Changes","text":"<ol> <li> <p>Double-check that:</p> <ul> <li>The Homing Fiducial is in the center of the reticle in the camera feed.</li> <li>The camera image is in sharp focus.</li> <li>The camera image is properly exposed.</li> </ul> </li> <li> <p>Go back to Machine Setup and select <code>Heads &gt; ReferenceHead H1</code>.   </p> </li> <li> <p>Click on the \"Capture Location\" icon button to save the location where OpenPnP will start searching for the Homing Fiducial.   </p> </li> <li> <p>Click <code>Apply</code> to save your changes.   </p> </li> <li> <p>Click on the \"Home\" button in the <code>Machine Controls Pane &gt; Jog Tab</code> and watch your machine home using the limit switches, then move the top camera over the homing fiducial and find its exact location. You may still get an error about <code>nozzle tip calibration</code>, which is normal. We'll be working on that next.   </p> </li> <li> <p>If your machine positions correctly over the homing fiducial but you receive the error: <code>FIDUCIAL-HOME no matches found.</code>, you should double-check your camera settings. If they seem alright, you may need to adjust your vision pipeline.   </p> </li> </ol>"},{"location":"openpnp/calibration/homing-fiducial/#next-steps","title":"Next Steps","text":"<p>Next is the MM/Pixel Calibration.</p>"},{"location":"openpnp/calibration/import-config/","title":"Importing Config Files","text":"<p>To use OpenPnP with the LumenPnP, you will need to tell the software about your machine's capabilities, such as it's size, how many cameras it has, etc. We've done the basic work for you and put together a starting set of configuration files that will describe your Lumen. To use our defaults, follow the instructions below.</p> <p>If you'd like to start from scratch with your setup, community member Qwertymodo has posted a very helpful video showing his process of doing calibration on his machine from scratch.</p>"},{"location":"openpnp/calibration/import-config/#windows","title":"Windows","text":"<ol> <li> <p>Download and install OpenPnP 2.0 for Windows here (probably the 64 bit installer).</p> </li> <li> <p>Go to the LumenPnP Releases Page.</p> </li> <li> <p>Find the latest release that is compatible with your hardware.</p> <ol> <li>If your machine's version begins with <code>v2</code>, pick the most recent release starting with <code>v2</code>.</li> <li>If your machine's version begins with <code>v3</code>, pick the most recent release starting with <code>v3</code>.</li> </ol> </li> <li> <p>Download the <code>Source Code (zip)</code> for that release.</p> </li> <li> <p>Unzip the source code.</p> </li> <li> <p>Navigate to the <code>openPnP</code> folder inside and find the four configuration files you need: <code>machine.xml</code>, <code>packages.xml</code>, <code>parts.xml</code>, and <code>vision-settings.xml</code>.</p> </li> <li> <p>To install these files in OpenPnP, you'll need to find its configuration folder. First, follow these instructions to show hidden folders in Windows Explorer.</p> </li> <li> <p>Navigate to:</p> </li> <li>On Windows Vista and newer: <code>C:\\Users\\[username]\\.openpnp2</code>.</li> <li> <p>On Windows XP and older: <code>C:\\Documents and Settings\\[username]\\.openpnp2</code>.</p> </li> <li> <p>Double-check that OpenPnP is closed.</p> </li> <li> <p>In the <code>.openpnp2</code> folder you'll find the currently used configuration files, <code>machine.xml</code>, <code>packages.xml</code>, <code>parts.xml</code>, and <code>vision-settings.xml</code>. It is a good idea to copy these somewhere as backup whenever you make changes like this.</p> </li> <li> <p>Copy the configuration files from the LumenPnP source files into <code>.openpnp2</code> and overwrite the old configuration files. Note that if you've already been using OpenPnP, you may want to only replace your <code>machine.xml</code> file, as the other files will overwrite your existing components and vision libraries.</p> </li> </ol>"},{"location":"openpnp/calibration/import-config/#macos","title":"MacOS","text":"<ol> <li> <p>Download and install OpenPnP 2.0 for Mac here.</p> </li> <li> <p>Go to the LumenPnP Releases Page.</p> </li> <li> <p>Find the latest release that is compatible with your hardware.</p> <ol> <li>If your machine's version begins with <code>v2</code>, pick the most recent release starting with <code>v2</code>.</li> <li>If your machine's version begins with <code>v3</code>, pick the most recent release starting with <code>v3</code>.</li> </ol> </li> <li> <p>Download the <code>Source Code (zip)</code> for that release.</p> </li> <li> <p>Unzip the source code.</p> </li> <li> <p>Navigate to the <code>openPnP</code> folder inside and find the four configuration files you need: <code>machine.xml</code>, <code>packages.xml</code>, <code>parts.xml</code>, and <code>vision-settings.xml</code>.</p> </li> <li> <p>To install these files in OpenPnP, you'll need to find its configuration folder. First, follow these instructions to show hidden folders in Finder.</p> </li> <li> <p>Next, navigate to: <code>/Users/[username]/.openpnp2</code>.</p> </li> <li> <p>Double check that OpenPnP is closed.</p> </li> <li> <p>In the <code>.openpnp2</code> folder you'll find the currently used configuration files, <code>machine.xml</code>, <code>packages.xml</code>, <code>parts.xml</code>, and <code>vision-settings.xml</code>. It is a good idea to copy these somewhere as backup whenever you make changes like this.</p> </li> <li> <p>Copy the configuration files from the LumenPnP source files into <code>.openpnp2</code> and overwrite the old configuration files. Note that if you've already been using OpenPnP, you may want to only replace your <code>machine.xml</code> file, as the other files will overwrite your existing components and vision libraries.</p> </li> </ol>"},{"location":"openpnp/calibration/import-config/#next-steps","title":"Next Steps","text":"<p>Our next step is to Connect To The Machine.</p>"},{"location":"openpnp/calibration/mm-per-pixel/","title":"MM/pixel Calibration","text":"<p>Nicely done so far! You've got your homing fiducial all set up. This next step calibrates the relationship between pixels and millimeters to make our cameras more accurate. You might have found that if you drag the reticle on the camera view around, the LumenPnP will move to the highlighted location. But you have probably also found that the movement is not very precise. We'll be fixing that in this calibration.</p>"},{"location":"openpnp/calibration/mm-per-pixel/#top-camera-calibration","title":"Top Camera Calibration","text":"<ol> <li> <p>Click on the <code>Machine Setup</code> tab in the top right pane.   </p> </li> <li> <p>Click on the \"Expand\" checkbox to open all of the features about your machine.   </p> </li> <li> <p>Click on <code>Heads &gt; ReferenceHead H1</code>.   </p> </li> <li> <p>Click on the \"Position Camera over location\" icon button show below. This will move the top camera to where your datum board is mounted.    </p> </li> <li> <p>Click on <code>Heads &gt; ReferenceHeadH1 &gt; Cameras &gt; OpenPnPCaptureCamera Top</code>.    </p> </li> <li> <p>Go to the <code>General Configuration</code> tab.    </p> </li> <li> <p>Scroll down to <code>Units Per Pixel</code>.    </p> </li> <li> <p>Set the X and Y Object Dimensions to <code>5</code>. </p> </li> <li> <p>Jog the machine so that one of the golden guideline squares on the datum board are visible in the top camera's view. The whole square must be visible. Zoom out of the camera feed with the scroll wheel if necessary.   </p> </li> <li> <p>Then click the <code>Measure</code> button.   </p> </li> <li> <p>A box with drag handles will appear in the camera view. Drag the box so that it lines up with the lines on the datum board; they are exactly 5mm x 5mm. Make sure that you are aligning the bounding box with the center of the lines as shown in the image below.   </p> </li> <li> <p>Once you have it perfectly outlined, click <code>Confirm</code>. The new calibration numbers will populate the Units per Pixel fields. They should be relatively close to the default values.   </p> </li> <li> <p>Click <code>Apply</code> to save the changes.   </p> </li> <li> <p>To confirm, drag the reticle on the top camera view to move the machine. The camera center should move exactly where you tell it to. If it's inaccurate, try doing the calibration again or tweaking the values in the fields.</p> </li> </ol>"},{"location":"openpnp/calibration/mm-per-pixel/#bottom-camera-calibration","title":"Bottom Camera Calibration","text":"<ol> <li> <p>Install an N24 nozzle on the left tool head.   </p> </li> <li> <p>Click on the <code>Machine Setup</code> tab in the top right pane.   </p> </li> <li> <p>Click on the \"Expand\" checkbox to open all of the features about your machine.   </p> </li> <li> <p>Click on <code>Cameras &gt; OpenPnPCaptureCamera Bottom</code>.    </p> </li> <li> <p>Go to the <code>Position</code> tab.    </p> </li> <li> <p>Click on the \"Position nozzle over location\" button    </p> </li> <li> <p>Use the jog controls to move the nozzle directly over the center of the bottom camera. Do not adjust the Z-axis.     </p> </li> <li> <p>Twist the lens of the bottom camera until the tip of the nozzle is in focus.    </p> </li> <li> <p>Go to the <code>General Configuration</code> tab.    </p> </li> <li> <p>Scroll down to <code>Units Per Pixel</code>.    </p> </li> <li> <p>Set the X and Y Object Dimensions to <code>4</code>. </p> </li> <li> <p>Then click the <code>Measure</code> button.   </p> </li> <li> <p>A box with drag handles will appear in the camera viewfinder. Drag the bounding box around the nozzle tip so that it's perfectly tangent to the edges; they are exactly 4mm x 4mm.   </p> </li> <li> <p>Once you have it perfectly outlined, click <code>Confirm</code>. New numbers should populate the Units per Pixel fields. They should be relatively close to the default values.   </p> </li> <li> <p>Then click <code>Apply</code> to save the changes.   </p> </li> <li> <p>To confirm, drag the reticle on the bottom camera view to move the machine. The nozzle tip should move exactly where you tell it to. If it's inaccurate, try doing the calibration again or tweaking the values in the fields.</p> </li> </ol>"},{"location":"openpnp/calibration/mm-per-pixel/#next-steps","title":"Next Steps","text":"<p>Next is Nozzle Offset Calibration.</p>"},{"location":"openpnp/calibration/nozzle-offset/","title":"Nozzle Offset Calibration","text":"<p>Now we need to tell OpenPnP how far the nozzles are away from the center point of the top camera. There are multiple strategies you can use to calculate this. One way is to use OpenPnP's built in Offset Wizard. You can read the OpenPnP docs about this step here.</p>  <p>Tip</p> <p>OpenPnP has some new methods of calibration using a secondary fiducial at a different Z height, and a small piece of paper. If you'd like to explore this method of calibration, you can find the OpenPnP docs about this process here. This process requires making and installing a calibration rig, 3D Units per Pixel calibration, and Advanced Camera Calibration.</p>  <ol> <li> <p>Install an N045 nozzle on the left toolhead.   </p> </li> <li> <p>Click on the <code>Machine Setup</code> tab in the top right pane.   </p> </li> <li> <p>Click on the \"Expand\" checkbox to open all of the features about your machine.   </p> </li> <li> <p>Click on <code>Heads &gt; ReferenceHead H1 &gt; Nozzles &gt; ReferenceNozzle N1</code> </p> </li> <li> <p>Click on the <code>Offset Wizard</code> tab.   </p> </li> <li> <p>Confirm that the <code>Include Z?</code> checkbox is unchecked.   </p> </li> <li> <p>Read the instructions that OpenPnP provides in this window. This guide will use the homing fiducial as the starting point, instead of using putty or flour. But those are valid strategies as well if you'd prefer them.</p> </li> <li> <p>Select the <code>Nozzle: N1 - N045 (Head:H1)</code> from the machine controls dropdown.   </p> </li> <li> <p>Jog the nozzle so that it is just barely touching the datum board, and perfectly centered over the homing fiducial. We recommend looking for the shiny edge of the gold fiducial poking out from under the nozzle tip to determine if you've centered it correctly.     </p> </li> <li> <p>Click <code>Store nozzle mark position</code>. Do not navigate away from the <code>Heads &gt; ReferenceHead H1 &gt; Nozzles &gt; ReferenceNozzle N1</code> tab while running the wizard.   </p> </li> <li> <p>Raise the nozzle off the datum board.   </p> </li> <li> <p>Jog the X and Y axes to bring the top camera directly centered over the homing fiducial. Again, do not switch away from the Offset Wizard tab.   </p> </li> <li> <p>After centering the homing fiducial in the top camera view, click <code>Calculate nozzle offset</code>.   </p> </li> <li> <p>Click <code>Apply</code> to save the nozzle offset change.   </p> </li> <li> <p>If you have a v3 semi-assembled LumenPnP machine, start again from step 1 to calibrate your right nozzle. Place the nozzle on your right toolhead, and use <code>Heads &gt; ReferenceHead H1 &gt; Nozzles &gt; ReferenceNozzle N2</code> section.</p> </li> </ol>"},{"location":"openpnp/calibration/nozzle-offset/#next-steps","title":"Next Steps","text":"<p>Next is Bottom Camera Position.</p>"},{"location":"openpnp/ftp/","title":"Your First Job - Introduction","text":""},{"location":"openpnp/ftp/#what-youll-learn","title":"What you'll learn","text":"<p>This guide walks you through setting up and completing your first placement job using the Getting Started Kit, included with the LumenPnP v3. Before going through this guide, make sure you've completed the Calibration guide to get your machine up and running.</p> <p>It might be useful to refer to this guide again after you finish it the first time, since many of these steps will need to be performed for every new board and job you start. Take your time going through this the first time around and keep in mind that this process gets faster with experience.</p>"},{"location":"openpnp/ftp/#what-youll-need","title":"What you'll need","text":"<ul> <li>A LumenPnP</li> <li>The \"Getting Started Kit\" with:</li> <li>A FTP PCB</li> <li>0603 Resistors and LEDs in 8mm tape</li> <li>Universal Mounting Kit prints and hardware</li> <li>Printed tray feeders</li> </ul> <p>It's highly recommend to take some time to read through the OpenPnP Wiki. The OpenPnP documentation is much more in depth that this guide, as this guide is meant to get you up and running quickly with a known board and configuration. As you set up your own jobs, the OpenPnP documentation should be your primary reference.</p>"},{"location":"openpnp/ftp/installing-the-feeders/","title":"Installing the Feeders","text":"<p>The FTP PCB has two different types of components that need to be placed: resistors and LEDs. Each will need its own feeder so that the LumenPnP can pick each type of component. For this guide, you'll use printed tray feeders.</p>"},{"location":"openpnp/ftp/installing-the-feeders/#attach-feeders","title":"Attach Feeders","text":"<ol> <li> <p>Use two M3x10 button head screws and two M3 wingnuts to secure the printed tray feeder through onto the staging plate using holes: C15 and E15.   </p> </li> <li> <p>For each component, cut a strip of component tape off the reel about 125mm long.</p> </li> <li> <p>Slide the Resistors into the left-most tray feeder, and the LEDs the adjacent tray.</p> </li> <li> <p>In OpenPnP, connect to your LumenPnP and home it.   </p> </li> </ol>"},{"location":"openpnp/ftp/installing-the-feeders/#import-board","title":"Import Board","text":"<ol> <li> <p>Download the FTP board design. It's in the <code>LumenPnP_PCBs.zip</code> artifact on the latest major release.</p> </li> <li> <p>Navigate to the <code>Job</code> tab in the top right.   </p> </li> <li> <p>Click that \"Add\" Icon button to add a new board and select <code>New Board</code>. Save the board in the same directory as the job.   </p> </li> <li> <p>Click on the newly-created board in the list to select it.   </p> </li> <li> <p>Go to <code>File &gt; Import Board &gt; KiCAD .pos</code> </p> </li> <li> <p>In the Import popup:</p> <ol> <li>Select the <code>ftp-top.pos</code> file you downloaded earlier as the Top File</li> <li>Enable the <code>Assign Parts</code> checkbox.</li> <li>Enable the <code>Create Missing Parts</code> checkbox.</li> <li>Click <code>Import</code> </li> </ol> </li> <li> <p>Go to <code>File &gt; Save Job As</code> and save your FTP job.   </p> </li> </ol>"},{"location":"openpnp/ftp/installing-the-feeders/#add-feeders","title":"Add Feeders","text":"<ol> <li> <p>Navigate to the <code>Feeders</code> tab in the top-right pane.   </p> </li> <li> <p>Click on the \"Add Feeder\" icon button.   </p> </li> <li> <p>Select <code>ReferenceTrayFeeder</code> and click <code>Accept</code>.   </p> </li> <li> <p>In the lower-right panel, you'll be in the <code>Configuration</code> tab. Change the <code>Part</code> to be <code>R_0603_1608Metric-R_Small</code>.   </p> </li> <li> <p>Set the <code>Y</code> <code>Offset</code> to <code>-4</code>. This is the space between components on the tape.   </p> </li> <li> <p>Set the <code>Y</code> <code>Tray Count</code> to <code>30</code>. This is the number of components available on the feeder before it needs to be manually moved forward.   </p> </li> <li> <p>Set the Pick location to: <code>X=45</code>, <code>Y=175</code>, <code>Z=20</code> as a starting point.   </p> </li> <li> <p>Click on the \"Position Camera\" icon button to move the top camera roughly over the left feeder.   </p> </li> <li> <p>Position the center of the top camera feed over the center of the top-most slot holding a resistor in the tray. You can drag the reticle in the camera feed, or use the jog buttons.   </p> </li> <li> <p>Zoom in on the camera feed and precisely position the center of the reticle over the center of the slot holding the resistor. The resistor itself may not be perfectly centered, that is fine.   </p> </li> <li> <p>Click the \"Capture Camera Location\" icon button to save the XY position of the start of the feeder.   </p> </li> <li> <p>Click <code>Apply</code> to save the feeder settings   </p> </li> <li> <p>Click the <code>Enable</code> checkbox in the feeder list.   </p> </li> <li> <p>Do the same procedure again for the LED feeder. You'll assign the part <code>LED_0603_1608Metric-LED_Small</code> to the new feeder.</p> </li> </ol>"},{"location":"openpnp/ftp/installing-the-feeders/#installing-the-n045-nozzle","title":"Installing the N045 Nozzle","text":"<ol> <li>Grease the nozzle holder before installing the N045 nozzle.   </li> <li>Install your N045 nozzle onto the nozzle holder.   </li> <li>Wipe off any excess grease.   </li> <li> <p>Go to the <code>Machine Setup</code> tab in OpenPnP.   </p> </li> <li> <p>Navigate to <code>Heads &gt; ReferenceHead H1 &gt; Nozzles &gt; ReferenceNozzle N1</code>.   </p> </li> <li> <p>In the lower-right pane, switch to the <code>Nozzle Tips</code> tab.   </p> </li> <li> <p>For row <code>N045</code>, check both the <code>Compatible</code> and <code>Loaded</code> checkboxes. If you haven't set up automatic nozzle changing, you will receive a popup saying that you're required to manually load the nozzle on the toolhead.   </p> </li> <li> <p>Go to the <code>Packages</code> tab in the top-right pane.   </p> </li> <li> <p>Select <code>LED_0603_1608Metric</code> from the list.   </p> </li> <li> <p>In the lower-right pane, you'll be in the <code>Nozzle Tips</code> tab. Click the <code>Compatible</code> on the <code>N045</code> row.   </p> </li> <li>Similarly, select <code>R_0603_1608Metric</code> from the Package list.   </li> <li>And click the <code>Compatible</code> checkbox on the <code>N045</code> row.   </li> <li>Under the bottom-left <code>Machine Controls</code> pane, select <code>Nozzle: N1 - N045 (Head:H1)</code> to enable the left toolhead.   </li> </ol>"},{"location":"openpnp/ftp/installing-the-feeders/#fine-tuning-feeder-height","title":"Fine-tuning feeder height","text":"<ol> <li> <p>Navigate to the <code>Feeders</code> tab in the top-right pane.   </p> </li> <li> <p>Click on the \"Position Nozzle\" icon button to bring the nozzle over the feeder.   </p> </li> <li> <p>Use the Jog controls to lower the Z axis until the nozzle is touching the surface of the plastic tape cover.     </p> </li> <li> <p>Click on the \"Capture Nozzle\" icon button to save the new Z height of the feeder.   </p> </li> <li> <p>Jog the XY gantry away from the feeder.   </p> </li> <li> <p>Remove the tape cover from the feeder.</p> </li> <li> <p>Click the \"Pick\" icon button to pick a component from the feeder. If the component is picked up properly, your Z-height is correct. If not, you should:   </p> <ol> <li>Lower the Z height of the feeder by <code>0.1mm</code></li> <li>Press Apply to save the change</li> <li>Home the machine</li> <li>Try picking a component from the feeder again.</li> </ol> </li> <li> <p>After you've successfully picked a component, in the machine <code>Machine Controls</code> pane, switch to the <code>Special</code> Tab.   </p> </li> <li> <p>Recycle the component you've successfully picked up   </p> </li> <li> <p>Copy the final Z height, select the other feeder, paste it for the other feeder, and press <code>Apply</code> </p> </li> <li> <p>Test picking a component from the other feeder   </p> </li> </ol>"},{"location":"openpnp/ftp/installing-the-feeders/#next-steps","title":"Next Steps","text":"<p>Next is setting up the board.</p>"},{"location":"openpnp/ftp/setting-up-the-board/","title":"Setting up the Board","text":""},{"location":"openpnp/ftp/setting-up-the-board/#mounting-the-ftp-pcb","title":"Mounting the FTP PCB","text":"<p>Note</p> <p>It is not required that you mount your FTP board in the exact same location as described below. If you follow these steps you will have a slightly easier time setting the location of the board in OpenPnP, but if you need to set up a board somewhere else on the staging plates, that is totally fine, too.</p>  <ol> <li> <p>Loosely screw in the universal mounting components in the following locations:</p> <ul> <li>Static Board Mount positioned diagonally, screwed into B28</li> <li>Dynamic Board Mount positioned vertically, screwed into D28</li> <li>Dynamic Board Mount positioned horizontally, screwed into B30</li> <li>Board Support placed in E31   </li> </ul> </li> <li> <p>Cut strips of double-sided tape and apply them to the top of the FTP board. Do not cover the fiducial markers, but make sure that each of the pads are covered by tape. The double-sided tape lets the components stick to the board so that you can do a \"mock\" run of a placement job without dealing with solder paste.   </p> </li> <li> <p>Place the FTP board in the holders and push them so that they're snug against the sides of the board.   </p> </li> <li> <p>Tighten down the holders. You shouldn't be able to move the board except by pressing on the tab holding it in place.</p> </li> <li> <p>If you installed your holders in this location, the bottom left corner of your FTP board should be located around X328, Y94.</p> </li> </ol>"},{"location":"openpnp/ftp/setting-up-the-board/#finding-the-ftp-location","title":"Finding the FTP Location","text":"<p>The next step is to set the physical location of the FTP board in OpenPNP. You'll start by setting an approximate location and then fine tune the location using vision. Once the location is set, you can run the job to pick and place components. You'll likely need to go through these steps a few times to tune the settings.</p> <ol> <li> <p>Navigate to the <code>Job</code> tab in the  top-right pane.   </p> </li> <li> <p>In the bottom-right pane, you'll see the <code>Placements</code> panel. Find the three elements with the IDs: <code>FID1</code>, <code>FID2</code>, and <code>FID3</code>. You can sort the list by <code>Part</code> to find them easily.   </p> </li> <li> <p>For each of the three elements, go to the <code>Type</code> column, select where it says <code>Placement</code> and switch it to <code>Fiducial</code>. This tells OpenPnP that these three elements on the board are not components to be picked and placed, but fiducials to be scanned.   </p> </li> <li> <p>Back in the top-right pane, double-click on the <code>X</code> and <code>Y</code> values of <code>0.000</code> and change them to <code>X328</code> and <code>Y94</code> respectively. This will be the rough location of the bottom-left corner of the FTP board.   </p> </li> <li> <p>Get the Z axis coordinate used when setting up the feeders, subtract <code>0.10</code> from it, and enter the result into the <code>Z</code> coordinate for the board. Setting the <code>Z</code> slightly lower than the actual board height allows the spring-loaded nozzle holder to lightly press components into the board to make them stick.   </p> </li> <li> <p>Click the \"Position Camera on Board\" icon button and check that the center of the camera feed is very roughly lined up with the bottom-left corner of the FTP board.   </p> </li> <li> <p>In the lower-right pane, select one of the fiducials to highlight it.   </p> </li> <li> <p>Click the \"Position Camera\" icon button to move the top camera over the fiducial location.   </p> </li> <li> <p>The alignment will probably not be perfect. To fix this, click on the digital readout in the bottom right corner to zero your current position.   </p> </li> <li> <p>Then, move the tool head with the Jog buttons until the fiducial is centered in the reticle.   </p> </li> <li> <p>Read the relative XY position you've moved your tool head, and add those values to the board's X and Y positions. Do not change the position of the fiducial itself in the lower-right pane list as that will throw off the rest of the placements. Only adjust the location of the board itself, not the components relative to each other.   </p> </li> <li> <p>In the lower-right panel, select the other fiducial points in turn, and check their location with the \"position camera\" icon button.   </p> </li> <li> <p>If all the fiducials are close to the reticle center, you're ready to run a fiducial scan to get the exact location of your FTP board. If only the first fiducial is centered, your board is probably rotated (ie the bottom edge is not parallel with the X axis). You can still move on to the fiducial scan, but you may need to manually readjust the board so that it is straighter.</p> </li> <li> <p>Click on the \"Fiducial Scan for Location\" button. This will automatically move the camera to each of the fiducial locations and use the camera to try to identify the center of the fiducial. If it can find all three, it will automatically update the position and rotation of the board relative to the LumenPnP gantry.   </p> </li> <li> <p>If the fiducial check fails, here are some options for moving forward:</p> <ol> <li>You might need to rotate the FTP board to be more square to the LumenPnP motion system.</li> <li>You may need to adjust your vision pipeline.</li> <li>If you'd prefer, you can also fall back on manually defining the board's location using the \"Multiple Placements\" icon button.   </li> </ol> </li> <li> <p>To double-check the board's location, rerun the fiducial scan. It is also useful to select some of the other placement locations and move the camera to them as well to check that the camera is centered between the metal pads. If the camera is not lining up correctly, see Troubleshooting for help getting things more tightly set up.</p> </li> </ol>"},{"location":"openpnp/ftp/setting-up-the-board/#placing-components","title":"Placing Components","text":"<ol> <li>Make sure you've pulled back the protective tape cover on your feeders and that you have the correct nozzle installed.</li> <li> <p>It's time to place your first component. Press the \"Single job step\" icon button repeatedly until OpenPnP moves to pick up an LED, check it's orientation over the bottom camera, and then place it on the board.   </p> </li> <li> <p>If the component was not picked up correctly, you will need to adjust your feeder location or height.</p> </li> <li>If the component was not identified by the bottom camera correctly, you will likely need to adjust its vision pipeline.</li> <li>If the component did not stick to the FTP board, you should lower the FTP board's Z axis location (<code>0.10mm</code> increments are a good starting place).</li> <li>If the component stuck to the FTP board but was not centered on placement location (on the metal pads), you will need to do some fine tuning. It is useful to place five or so components before attempting to diagnose exactly what's wrong with your placements.</li> <li>Continue to click the \"Single Job Step\" to place the additional components (or click the \"Play\" icon button and pause the operation when you're ready.)</li> </ol> <p>It is perfectly normal for your very first set of component placements to have some errors. There are several different sources of placement error that we can address, one at a time. It will take a little trial and error to get placements perfect. Go to the Troubleshooting page for easy instructions.</p>"},{"location":"openpnp/next-steps/","title":"Next Steps","text":"<p>Congratulations! Your machine now has basic calibration complete. There are still many metrics to tweak and adjust as you go through the process of placing your first board. OpenPnP is a large and complex piece of software, and it will take time to get used to it.</p> <p>The following links are OpenPnP documentation pages that will help you confirm that your calibration is complete and accurate, and get a job loaded up and running.</p>  <code>Issues and Solutions</code> OpenPnP has a wonderful \"Issues and Solutions\" tab that will help you further calibrate your LumenPnP. It's highly recommended that you complete the \"Calibrations Milestone\" prior to using your LumenPnP in production, and that you explore all of the edits that it recommends you make. <code>Job Setup</code> This is an incredibly useful document, illustrating the difference between parts, packages, and placements, and how to import information about your parts into the software. It shows the UI and explains what lots of things do, along with walking you through setting up a job. There's also information about setting up feeders. We recommend using the ReferenceTrayFeeder and ReferenceStripFeeder. Soon we'll have our own powered feeder for the LumenPnP, which will have a selectable feeder type in OpenPnP, but that's still to come. <code>Mods</code> Many folks in the community have developed mods and upgrades to the machine that are all organized here. <code>Qwertymodo Full Calibration Video</code> Community member Qwertymodo has put together a video of doing his calibration from scratch, instead of using the OpenPnP config files in the repository as a starting point. Many folks in the community have found it very useful, especially for understanding all the menus and features OpenPnP has to offer."},{"location":"semi-assembly/","title":"Semi Assembly","text":"<p>These are assembly instructions for the Semi-Assembled LumenPnP. If you're looking for the instructions for the \"BYOP\" bring-your-own-printer kit, you can find them here.</p>"},{"location":"semi-assembly/#what-is-the-lumenpnp","title":"What is the LumenPnP?","text":"<p>The LumenPnP is an open source Pick and Place project led by Opulo. The LumenPnP is designed to be low cost and suited towards mid-scale manufacturing.</p>  <p>The LumenPnP is an ongoing project. The current version, V3, uses strip feeders and can reliably place components as small as 0402. Opulo is working on active, powered feeders.</p> <p>The LumenPnP is completely open source and has an active community with ongoing mechanical, electrical, and software modifications.</p> <p>It is completely open source and hackable. The main controller has three AUX ports, allowing anyone to add on peripherals or communicate with other machines.</p>  <p>Warning</p> <p>This documentation corresponds with a specific machine Version Number. The Version Number represents what version of hardware your machine has. If you're building a Semi-Assembled LumenPnP, you have a v3 machine, and these docs are for you! You should see \"v3.X.X\" on the pamphlet that was included in your kit. If you see \"v2\" on your pamphlet, use these instructions for your machine.</p>"},{"location":"semi-assembly/#before-you-begin","title":"Before you begin","text":""},{"location":"semi-assembly/#machine-orientation-and-terminology","title":"Machine Orientation and Terminology","text":"<p>Throughout this guide we'll be referring to different orientations and directions of the machine as \"left, right, front, back, up, and down.\" In general, these words are in reference to the typical view of the machine, facing it directly, as shown below.</p>  <p>We'll also refer to putting the machine \"back on its haunches.\" This refers to a feature of the LumenPnP where it can be lifted up by the front rail and let to rest upright on its back feet. This orientation is tremendously helpful for installing things to the staging plate and plugging things into the motherboard. Whenever putting your machine back, make sure the Y gantry is pushed all the way to the back of the machine to prevent backdriving the Y stepper motor driver.</p>"},{"location":"semi-assembly/#help","title":"Help","text":"<p>If you find that there's something unclear in this documentation, please submit a ticket on Github about it! You can also file an issue using the link in the upper right of any page on this site. We're trying to make this as clear and understandable as possible, so every issue you tag helps us make it better for everyone else. You can also check out the Discord server and ask questions to the community.</p>"},{"location":"semi-assembly/#assembly-video","title":"Assembly Video","text":"<p>We have an instructional video that walks you through the process of assembling your LumenPnP. This video is just to help visualize how parts go together; you'll still need this guide to complete your build. You can find the video embedded below:</p>   <p>Keep In Mind<p>Don't worry if something in the video doesn't look exactly like what you have in the box. We\u2019re constantly tuning and tweaking things to make them better and easier to use, so you might find things look slightly different.</p> </p>"},{"location":"semi-assembly/#timing","title":"Timing","text":"<p>Expect assembly to take about 50 minutes.</p>"},{"location":"semi-assembly/#youll-need","title":"You'll Need","text":"<ul> <li>Your packaged Semi-Assembled LumenPnP</li> <li>A clear tabletop for assembly</li> <li>A computer</li> <li>The ability to plug in three high-bandwidth USB-A ports - Your computer will need to communicate with both the data stream that controls the machine, along with two webcam feeds. It might be possible to handle all of this data through one USB port on your computer with an external USB hub, but you might find you need to plug into a few different ports on your computer, depending on the hardware you have.</li> </ul>"},{"location":"semi-assembly/#next-steps","title":"Next steps","text":"<p>Let's dive in! The first step is unboxing your machine.</p>"},{"location":"semi-assembly/assembling-frame/","title":"Assembling Frame","text":"<p>In this step, you will assemble the main frame of the machine.</p> <ol> <li> <p>Remove the left and right leg assemblies from the second tray.    </p> </li> <li> <p>Remove the two aluminum rails from underneath the cable chain in the first tray.    </p> </li> <li> <p>Remove the X gantry assembly from the second tray.   </p> </li> <li> <p>Stand the left and right leg assemblies upright on the tabletop as shown below. The left leg assembly has a cable harness labeled <code>Y1</code>, and the tensioner arm pivot is on the left. The right leg assembly has a cable harness labeled <code>Y2</code> and the tensioner arm pivot is on the right. Check the photos below for reference.        </p> </li> <li> <p>Remove two M5x10mm socket head screws and two t-slot nuts from your hardware bag.   </p> </li> <li> <p>Insert one of the M5x10mm screws into the front left leg as shown.    </p> </li> <li> <p>Attach a t-slot nut onto the screw. Make sure that the nut is oriented vertically as shown in the images below.      </p> </li> <li> <p>Find your front rail. This is one of the two aluminum extrusions you removed from the packaging earlier. It only has one right-angle bracket attached to each side instead of two.    </p> </li> <li> <p>Align the front rail and left leg subassembly as shown in the image below. Make sure that the rotation of the t-slot nut in the front rail matches with the image as well. It should be perpendicular to the axis of the front rail.   </p> </li> <li> <p>Rotate the front rail upward as shown in the pictures below. Make sure the t-slot nut in the bracket on the front rail fits inside the bottom extrusion of the left leg subassembly. The front rail and right angle bracket should sit flush against the extrusion.     </p> </li> <li> <p>Slide the front rail into the front left leg. Make sure it's completely pushed into the leg with no gaps. Tighten the two screws shown below to hold the front rail in place.       </p> </li> <li> <p>Attach the remaining M5x10mm socket head and t-slot nut into the front right leg in the same way as you did for the front left leg.      </p> </li> <li> <p>Place the front and right leg subassemblies upright as shown in the image below.   </p> </li> <li> <p>Ensure the t-slot nut on right side of the front rail is oriented as shown below. Lift the front rail up into the bottom extrusion of the right leg subassembly, and slide it towards you into the front right leg as shown. Tighten the front screw in place.       </p> </li> <li> <p>Lift up the machine onto its back legs, and tighten in the final loose screw.     </p> </li> <li> <p>Find the back rail. This is the remaining aluminum extrusion that you removed from the first tray. It should have two right angle brackets on each side. Align the t-slot nuts perpendicular to the rail as shown in the image below. Do this for both sides.    </p> </li> <li> <p>Place the back rail across the back legs as shown. Rotate it upwards into the bottom extrusion of the left leg subassembly, ensuring that both t-slot nuts fit into the v-slot. It should be flush against the rail.     </p> </li> <li> <p>Make sure that the right side of the back rail has fit into the right leg extrusion. You might find that the back legs need to be pulled together or apart a little in order to get them to fit; this is ok. The back rail should be flush with the extrusion if the t-slot nuts have been inserted into the extrusion correctly.    </p> </li> <li> <p>Slide the back rail up and let the left side of it rest on the spacing bracket included in your tool kit. Make sure it's resting on the short side (50mm). Lightly tighten the top screw on the left side, making sure to keep the end of the extrusion and right angle brackets perfectly flush with the side of the extrusion.      </p> </li> <li> <p>Use the bracket to set the spacing on the right side, and tighten both screws into place. Make sure the right angle brackets are perfectly flush with the right side extrusion as well. Go back to the left side and tighten the bottom screw.     </p> </li> <li> <p>Bring your machine back down onto four legs and get the X gantry assembly (shown below).     </p> </li> <li> <p>Slide both Y gantries to the back of the machine (opposite the tension arms), and drop the X gantry assembly onto them as shown. Make sure the toolhead motors are facing you like the image below.    </p> </li> <li> <p>Attach the X gantry to the Y gantries by tightening four M5x25 socket head screws found in your hardware bag into the two holes on each side of the X gantry assembly.      </p> </li> <li> <p>Your machine frame is done!   </p> </li> </ol>"},{"location":"semi-assembly/assembling-frame/#next-steps","title":"Next Steps","text":"<p>Time to move on to mounting the staging plates.</p>"},{"location":"semi-assembly/mounting-staging-plates/","title":"Mounting Staging Plates","text":"<p>In this step, you will mount the Staging Plate and Build Plate to the machine's frame.</p> <ol> <li> <p>Remove the staging plate and build plate from the first tray. The staging plate has the motherboard, camera, pumps, valves, wiring, and tubing mounted on it. The build plate is bare.    </p> </li> <li> <p>Get 8x M5x8mm button head screws and 8x t-slot nuts from your hardware bag.   </p> </li> <li> <p>Insert the button head screws through the large holes in the four corners of each plate. Make sure you are inserting them from the side of the plate that has the description text as shown, and not from the side with the Opulo logo. Loosely thread a t-slot nut onto the opposite side of each screw.      </p> </li> <li> <p>Place the staging plate into the machine as shown below. Have it rest on the lower of the two extrusions in each leg assembly. Make sure the staging plate's orientation matches the images below.      </p> </li> <li> <p>Make sure that the staging plate is sitting flush on the extrusions. The t-slot nut should fit inside the slot in the extrusion.    </p> </li> <li> <p>Grab the alignment bracket that you used earlier.   </p> </li> <li> <p>Place the bracket along the front rail with the long side pointing away from you. Arrange the staging plate so that it is flat against the bracket.    </p> </li> <li> <p>While ensuring that the flat edge of the staging is flush against the side of the extrusion, tighten the screw closest to the front of the machine. Don't tighten the back one just yet.    </p> </li> <li> <p>Move the alignment bracket to the right side, and while ensuring the staging plate is right up against it, tighten both screws on the right side.    </p> </li> <li> <p>Tighten the second screw on the left side of the machine.   </p> </li> <li> <p>Place the build plate onto the same rail as the staging plate. Ensure the t-slot nuts are fully inserted into the extrusion.    </p> </li> <li> <p>Slide the build plate flush against the staging plate, and tighten all four screws.   </p> </li> <li> <p>Lift the machine up onto its back legs.    </p> </li> <li> <p>Grab the build plate foot from the second tray, and unscrew the screw in the print.    </p> </li> <li> <p>Mount the build plate foot in the center of the circle cutout, right beneath the goblin icon. Tighten the screw you removed earlier in from the top side to secure it in place.    </p> </li> </ol>"},{"location":"semi-assembly/mounting-staging-plates/#next-steps","title":"Next Steps","text":"<p>The plates are fully mounted! Time to move on to wiring.</p>"},{"location":"semi-assembly/unboxing/","title":"Unboxing","text":"<ol> <li> <p>First, take a look at what's in the box! The first thing you'll see when you open the package is the getting started card. This card has your machine's version number on it. Make sure your version number begins with <code>v3</code>.     </p> </li> <li> <p>Remove the top protective layer of foam revealing the first tray of components. This tray contains:    </p> <ul> <li>Staging plate</li> <li>Build plate</li> <li>Cable chain assembly</li> <li>Cable chain frame mount</li> <li>IEC power cable</li> <li>Front rail</li> <li>Back rail</li> </ul> </li> <li> <p>Grab the foam as shown below, rotate the tray up, then pull it out and set it aside, revealing the second tray of parts.   </p> </li> <li> <p>The second tray contains the following parts: </p> <ul> <li>Left and right leg assemblies</li> <li>X gantry assembly</li> <li>Feet for the build and staging plates</li> <li>Power supply</li> <li>Getting started kit</li> <li>Tool bag</li> </ul> </li> <li> <p>Open up the tool bag. Inside, you'll find the following items:     </p> <ul> <li>Hobby knife</li> <li>Flush snips</li> <li>135 degree tweezers</li> <li>Allen wrench set</li> <li>Small Phillips screwdriver</li> <li>Alignment bracket</li> <li>Bottom camera cable</li> <li>ESD wrist strap</li> <li>USB-A to USB-B cable</li> <li>Hardware bag</li> <li>Zip ties</li> </ul> </li> </ol>"},{"location":"semi-assembly/unboxing/#next-steps","title":"Next Steps","text":"<p>Alright, let's move on to assembling the frame.</p>"},{"location":"semi-assembly/wiring/","title":"Wiring","text":"<p>In this step, you will mount and connect all the wiring and pneumatic tubing.</p> <ol> <li> <p>Find the <code>front-drag-chain-mount</code> print in the first tray, and grab an M5x25mm and M5x16mm socket head screw from the hardware bag.   </p> </li> <li> <p>Place the <code>front-drag-chain-mount</code> on top of the front left leg as shown.   </p> </li> <li> <p>Insert the screws through the print into the front left leg, with the M5x25mm screw on the bottom, and the M5x16mm screw on top.     </p> </li> <li> <p>Grab the cable harness from the first tray. One side of the cable chain will have shorter wires, and the other will have longer wires with a print zip tied to it. Place your harness as shown in the image below.   </p> </li> <li> <p>Check the clip holding the cable that exits the cable chain part way through. If it has popped out during shipping, press it back into place.    </p> </li> <li> <p>Lift up the harness and place it onto your machine as shown below. Place the side of the cable chain with the longer wires on the ledge in the <code>front-drag-chain-mount</code>. It can help to pull your Y gantries forward to give the right side of the harness a place to rest for the next few steps.    </p> </li> <li> <p>Screw two M5x10mm socket head screws through the mounting holes in the cable chain and into the <code>front-drag-chain-mount</code>. If you notice that a cable chain clip pops out at any point, it can easily be pressed right back into place.     </p> </li> <li> <p>Your machine should now look like the image below.   </p> </li> <li> <p>On the other side of the cable chain, you'll notice two wires are sticking out of the back of the chain. Pull these out of the way as shown, and mount the other side of the cable chain to the X gantry using two M5x16mm socket head screws.     </p> </li> <li> <p>Look at your machine from the back. You should see the two cables you pulled aside earlier. Take the connector with four wires and plug it into the port on the back side of the camera, as shown below.   </p> </li> <li> <p>Take the remaining cable on the back side of the X gantry with only three wires and plug it into the top light, as shown below.   </p> </li> <li> <p>On the front side of the X gantry, take the connector with four holes but only three wires and plug it into the limit switch PCB.   </p> </li> <li> <p>Take the connector with six holes and four wires and plug it into the Z motor.   </p> </li> <li> <p>Grab two zip ties from the bag in your tool kit and fit them through the channels in the top side of the X gantry.    </p> </li> <li> <p>Find the cable labeled <code>LH</code>, route it over the top of the Z motor, and secure it in place with the zip tie on the left side of the X gantry. Trim the excess zip tie.     </p> </li> <li> <p>Plug the cable labeled <code>LH</code> into the left motor on the X gantry. This cable is inserted from the bottom.   </p> </li> <li> <p>Find the cable labeled <code>RH</code> and secure it in place using the zip tie on the right side of the X gantry. Trim the excess zip tie.    </p> </li> <li> <p>Plug the cable labeled <code>RH</code> into the right motor on the X gantry. This cable is inserted from the bottom.   </p> </li> <li> <p>Find the two pieces of tubing labeled <code>LH</code> and <code>RH</code>, and insert <code>LH</code> into the left motor, and <code>RH</code> into the right motor. Make sure that the tubing is in between the <code>LH</code> and <code>RH</code> cable harness going to the motors as shown in the image below.    </p> </li> <li> <p>Your X gantry should look like the image below.   </p> </li> <li> <p>Take the print attached to the wire exiting from the middle of the cable chain, and align it with the back of the X motor as shown in the image below.   </p> </li> <li> <p>Using two M5x16mm socket head screws, mount the X cable guide to the Y gantry. Then plug the cable into the X motor.    </p> </li> <li> <p>Your machine should look like the image below. Lift it up onto its back legs for final wiring steps.    </p> </li> <li> <p>Remove the motherboard cover by unscrewing any screws, lifting the top edge away from the board, and rotating it out from underneath the pneumatic tubing.     </p> </li> <li> <p>Take the <code>Y1</code> cable harness that came attached to the left leg assembly and guide it underneath the motherboard from the left side, and out through the top as shown. Plug the connector into the second port from the left and tuck any excess cabling underneath the motherboard.    </p> </li> <li> <p>Using the cable clips as shown below, guide the <code>Y2</code> cable harness from the right leg assembly across the top of the staging plate, under the motherboard, and out through the top. You'll have to loosen the clips using an allen key to get the cable underneath them. Be sure to clamp them down tight so the cable doesn't hang loosely.      </p> </li> <li> <p>Plug the <code>Y2</code> cable harness into the third port from the left. Tuck any excess cabling underneath the motherboard.   </p> </li> <li> <p>Take a look at the bundle of cables coming from the cable chain. One cable with a USB connector will not be zip tied into the print. Move this cable out of the way for now, as we won't be routing it with the rest of the cables.   </p> </li> <li> <p>Isolate the following items from the bundle, and guide them under the motherboard from the left side, and out through the top as shown below.</p> <ul> <li><code>RH</code> tubing</li> <li><code>LH</code> tubing</li> <li><code>XM</code> cable harness</li> <li><code>ZM</code> cable harness</li> <li><code>LM</code> cable harness    </li> </ul> </li> <li> <p>Plug the <code>XM</code> cable harness into the first port from the left (labeled \"X\"), plug the <code>ZM</code> cable harness into the fourth port from the left (labeled \"Z\"), and plug the <code>LM</code> cable harness into the port on the far left (labeled \"L\").     </p> </li> <li> <p>Take the two tubes left and stick them back under the motherboard, out the right side, and plug them into the pneumatic fitting that matches the label on the tubing.     </p> </li> <li> <p>With the remaining three cable harness from the bundle, plug the harness labeled <code>RM</code> into the first port in the second row (labeled \"R\"), plug the harness labeled <code>ZL</code> into the Z Limit Switch port, and plug the harness labeled <code>DL</code> into the Top Light port.     </p> </li> <li> <p>Tuck any excess cabling underneath the motherboard. Your machine should look like the image below.   </p> </li> <li> <p>Attach the strain relief print into the bottom of the bottom rail in the left leg assembly.   </p> </li> <li> <p>Fit the cover back onto the motherboard by rotating it underneath the pneumatic tubing, and pressing down around the stepper driver pins and heatsinks. Remount using the hardware it was originally mounted with.     </p> </li> <li> <p>Grab the USB &lt;-&gt; 4 pin connector cable from your tool bag, and plug the 4 pin connector into the back of the bottom camera. Attach the cable to the bottom camera mount using a zip tie and snip off the excess.    </p> </li> <li> <p>Find the staging plate foot from the second tray, and press fit it onto the bottom camera mount, taking care to align the cutout with the bottom camera cable.    </p> </li> <li> <p>Route the USB cable underneath the motherboard.    </p> </li> <li> <p>Plug the power supply into a wall outlet, and plug the barrel jack into the port in the upper-right corner of the motherboard. You should see a light come on underneath the cover.</p> </li> <li>Plug the USB-B cable located in your tool bag into the USB port on the bottom-left corner of the motherboard.</li> <li>Lower your machine down onto all four legs.</li> <li> <p>Plug the three USB cables coming from your machine into your computer. Depending on your computer's hardware, you might need to plug these all into separate USB ports on your computer and not use an external hub. We'll cover more about this later during calibration.</p> </li> <li> <p>You're done with your build! Time to head over to the OpenPnP section of the docs for calibration and running your first job:</p> </li> </ol>"},{"location":"semi-assembly/wiring/#openpnp-docs-page","title":"OpenPnP Docs Page","text":""}]}